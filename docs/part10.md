## –í–≤–µ–¥–µ–Ω–∏–µ –≤ –±–∞–∑–æ–≤—ã–π CQRS –ø—É—Ç–µ–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ Go –ø—Ä–æ–µ–∫—Ç–∞

–†–æ–±–µ—Ä—Ç –õ–∞—â–∞–∫. –ì–ª–∞–≤–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä [Karhoo](https://www.karhoo.com/). –°–æ—É—á—Ä–µ–¥–∏—Ç–µ–ª—å
[Three Dots Labs](https://threedotslabs.com/).
–°–æ–∑–¥–∞—Ç–µ–ª—å [Watermill](https://github.com/ThreeDotsLabs/watermill).

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤—ã –∑–Ω–∞–µ—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å, –≤ –∫–æ—Ç–æ—Ä–æ–º:

* —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–∞ –±–æ–ª—å—à–∞—è, –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –º–æ–¥–µ–ª—å, –∫–æ—Ç–æ—Ä—É—é —Ç—Ä—É–¥–Ω–æ –ø–æ–Ω—è—Ç—å –∏ –∏–∑–º–µ–Ω–∏—Ç—å,
* –∏–ª–∏ –≥–¥–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ –Ω–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞,
* –∏–ª–∏ –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω.

–ù–æ —á–∞—Å—Ç–æ –±–µ–¥–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ–¥–Ω–∞. –ù–µ—Ä–µ–¥–∫–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —Å–µ—Ä–≤–∏—Å—ã —Å–æ –≤—Å–µ–º–∏ —ç—Ç–∏–º–∏ 
–ø—Ä–æ–±–ª–µ–º–∞–º–∏.

–ö–∞–∫–∞—è –∏–¥–µ—è –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –≥–æ–ª–æ–≤—É –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º? 
–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–¥–µ–ª–∏–º –µ–≥–æ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤!

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –±–µ–∑ –Ω–∞–¥–ª–µ–∂–∞—â–µ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Ç—É–∞—Ü–∏—è –ø–æ—Å–ª–µ 
—Å–ª–µ–ø–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ö—É–∂–µ, —á–µ–º —Ä–∞–Ω—å—à–µ:

* **–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –µ—â–µ —Ç—Ä—É–¥–Ω–µ–µ –ø–æ–Ω—è—Ç—å** ‚Äî 
  —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É —á–∞—Å—Ç–æ –ª–µ–≥—á–µ –ø–æ–Ω—è—Ç—å, –µ—Å–ª–∏ –æ–Ω–∞ —Å–æ–±—Ä–∞–Ω–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ,
* **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** ‚Äî –∏–Ω–æ–≥–¥–∞ —á—Ç–æ-—Ç–æ —Å–æ–≤–º–µ—â–∞—é—Ç –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ; 
  –±–æ–ª—å—à–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤ –æ–¥–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –º–µ–Ω–µ–µ 
  —Å–ª–æ–∂–Ω–∞, —á–µ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏,
* **–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏**, 
  –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –¥—Ä—É–≥–æ–π –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.
  
![microservices](images/part10/more-microservices.jpg)
–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –ø–æ–ª–µ–∑–Ω—ã, –Ω–æ –æ–Ω–∏ –Ω–µ —Ä–µ—à–∞—Ç –≤—Å–µ—Ö –≤–∞—à–∏—Ö –ø—Ä–æ–±–ª–µ–º...

–î–ª—è –ø–æ–ª–Ω–æ–π —è—Å–Ω–æ—Å—Ç–∏ - —è –Ω–µ –≤—Ä–∞–≥ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤. **–Ø –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ—Ç–∏–≤ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–ª–µ–ø–æ 
–ø—Ä–∏–º–µ–Ω—è—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –æ–Ω–∏ –≤–Ω–æ—Å–∏–ª–∏ –Ω–µ–Ω—É–∂–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ 
–Ω–µ—Ä–∞–∑–±–µ—Ä–∏—Ö—É –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–±–ª–µ–≥—á–∏—Ç—å –Ω–∞—à—É –∂–∏–∑–Ω—å.**

–î—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ CQRS (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤) —Å
—Ä–∞–Ω–µ–µ –æ–ø–∏—Å–∞–Ω–Ω–æ–π [—á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π](https://threedots.tech/post/introducing-clean-architecture/) –∏
[—É–ø—Ä–æ—â–µ–Ω–Ω—ã–º DDD](https://threedots.tech/post/ddd-lite-in-go-introduction/). **–≠—Ç–æ
–º–æ–∂–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ —Ä–µ—à–∏—Ç—å —É–ø–æ–º—è–Ω—É—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.**

## –†–∞–∑–≤–µ CQRS –Ω–µ —Å–ª–æ–∂–Ω–∞—è –º–µ—Ç–æ–¥–∏–∫–∞?

–†–∞–∑–≤–µ CQRS –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ —ç—Ç–∏—Ö –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ C#/Java/√ºber, 
–∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç –±–æ–ª—å—à–æ–π –±–µ—Å–ø–æ—Ä—è–¥–æ–∫ –≤ –∫–æ–¥–µ? –í–æ 
–º–Ω–æ–≥–∏—Ö –∫–Ω–∏–≥–∞—Ö, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è—Ö –∏ —Å—Ç–∞—Ç—å—è—Ö CQRS –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π —à–∞–±–ª–æ–Ω
–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ù–æ —ç—Ç–æ –Ω–µ —Ç–∞–∫.

**–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ CQRS - —ç—Ç–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π —à–∞–±–ª–æ–Ω, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–π –±–æ–ª—å—à–∏—Ö –≤–ª–æ–∂–µ–Ω–∏–π. –ï–≥–æ 
–º–æ–∂–Ω–æ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, 
—É–ø—Ä–∞–≤–ª—è–µ–º–∞—è —Å–æ–±—ã—Ç–∏—è–º–∏, event-sourcing –∏–ª–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â–∞—Ö.**
–ù–æ –æ–Ω–∏ –Ω—É–∂–Ω—ã –Ω–µ –≤—Å–µ–≥–¥–∞. –î–∞–∂–µ –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ 
CQRS –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è 
—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫–æ–¥–∞.

–ö–æ–≥–¥–∞ –Ω–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CQRS –≤ Go? –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç CQRS?
–û–±–æ –≤—Å–µ–º —ç—Ç–æ–º –≤—ã —É–∑–Ω–∞–µ—Ç–µ –∏–∑ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π —Å—Ç–∞—Ç—å–∏. üòâ

–ö–∞–∫ –æ–±—ã—á–Ω–æ, —è –±—É–¥—É –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Å—ë –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ, –ø—É—Ç—ë–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è 
[Wild Workouts](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example).

> –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—á–µ—Ä–µ–¥–Ω–∞—è —Å—Ç–∞—Ç—å—è —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏ –∫–æ–¥–∞.
>
> –≠—Ç–æ—Ç –ø–æ—Å—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –±–æ–ª—å—à–æ–≥–æ —Ü–∏–∫–ª–∞, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞
> **Go, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Å –Ω–∏–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤
> –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ**. –ú—ã –¥–µ–ª–∞–µ–º —ç—Ç–æ, –¥–µ–ª—è—Å—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏
> –Ω–∞ –º–Ω–æ–≥–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–º–∏ —Å –≤–æ–∑–≥–ª–∞–≤–ª—è–µ–º—ã–º–∏ –Ω–∞–º–∏ —Å –∫–æ–º–∞–Ω–¥–∞–º–∏,
> –∏ [–Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö](https://threedots.tech/post/ddd-lite-in-go-introduction/#thats-great-but-do-you-have-any-evidence-it-works).
> –í—ã –º–æ–∂–µ—Ç–µ –∏–∑—É—á–∏—Ç—å —ç—Ç–∏ –º–µ—Ç–æ–¥—ã, —Å–æ–∑–¥–∞–≤ —Å –Ω–∞–º–∏ [–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π](https://threedots.tech/post/serverless-cloud-run-firebase-modern-go-application/#what-wild-workouts-can-do) –ø—Ä–∏–º–µ—Ä
> –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Go - **Wild Workouts**.
>
> –ú—ã –ø–æ—Å—Ç—É–ø–∏–ª–∏ –Ω–µ —Å–æ–≤—Å–µ–º –æ–±—ã—á–Ω–æ ‚Äî **–¥–æ–±–∞–≤–∏–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å—Ä–∞–∑—É –∑–∞–º–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
> –≤ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é Wild Workouts**. –ù–µ—É–∂–µ–ª–∏ –º—ã —Å–æ—à–ª–∏ —Å —É–º–∞? –ü–æ–∫–∞ –Ω–µ—Ç. üòâ
> –≠—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã –¥–ª—è –º–Ω–æ–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ Go. **–í –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ —ç—Ç–∏
> –Ω–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∫—Ä–∏—Ç–∏—á–Ω—ã–º–∏ –∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.**
>
> **–≠—Ç–æ –æ–¥–∏–Ω –∏–∑ –≤–∞–∂–Ω–µ–π—à–∏—Ö –Ω–∞–≤—ã–∫–æ–≤ —Å—Ç–∞—Ä—à–µ–≥–æ –∏–ª–∏ –≤–µ–¥—É—â–µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞; –≤—Å–µ–≥–¥–∞ –Ω—É–∂–Ω–æ
> –ø–æ–º–Ω–∏—Ç—å –æ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö.**
>
> –ú—ã –∏—Å–ø—Ä–∞–≤–∏–º –∏—Ö –ø—É—Ç–µ–º **—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞** Wild Workouts. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã –±—ã—Å—Ç—Ä–æ –ø–æ–π–º—ë—Ç–µ
> –º–µ—Ç–æ–¥–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–º–∏ –º—ã –¥–µ–ª–∏–º—Å—è.
> –ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã —ç—Ç–æ —á—É–≤—Å—Ç–≤–æ, –∫–æ–≥–¥–∞ –ø—Ä–æ—á–∏—Ç–∞–ª–∏ —Å—Ç–∞—Ç—å—é –æ –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ç–æ–¥–∏–∫–µ –∏ –ø–æ–ø—ã—Ç–∞–ª–∏—Å—å
> —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ—ë, –Ω–æ –Ω–µ —Å–º–æ–≥–ª–∏ –∏–∑-–∑–∞ —É–ø—É—â–µ–Ω–∏–π –∏ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–µ—Ç–∞–ª–µ–π –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ.
> –ü—Ä–æ–ø—É—Å–∫ –¥–µ—Ç–∞–ª–µ–π –¥–µ–ª–∞–µ—Ç —Å—Ç–∞—Ç—å–∏ –∫–æ—Ä–æ—á–µ –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–æ —ç—Ç–æ
> –Ω–µ –Ω–∞—à–∞ —Ü–µ–ª—å. –ù–∞—à–∞ —Ü–µ–ª—å ‚Äî —Å–æ–∑–¥–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—Å—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–Ω–∞–Ω–∏–π –¥–ª—è
> –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–∏–∫. –ï—Å–ª–∏ –≤—ã –µ—â–µ –Ω–µ —á–∏—Ç–∞–ª–∏ [–ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—Ç–∞—Ç—å–∏ –∏–∑
> —ç—Ç–æ–≥–æ —Ü–∏–∫–ª–∞](https://threedots.tech/series/modern-business-software-in-go/),
> –º—ã –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.
>
> –ú—ã —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö –∑–Ω–∞–Ω–∏–π –Ω–µ–ª—å–∑—è –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –¥–µ—Ç–∞–ª–∏. –ï—Å–ª–∏ –≤—ã
> —Ö–æ—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å
> –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å. –ï—Å–ª–∏ –±—ã –≤—Å—ë –±—ã–ª–æ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ,
> —É –Ω–∞—Å –±—ã –Ω–µ –±—ã–ª–æ —Ç–∞–∫–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–∞—à–∞—é—â–µ–≥–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∫–æ–¥–∞.
>
> –í–æ—Ç [–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑ 14 –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ç–µ–π](https://threedots.tech/series/modern-business-software-in-go/).
>
> –í–µ—Å—å –∫–æ–¥ Wild Workouts –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ [GitHub](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example). –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∑–≤–µ–∑–¥—É
> –Ω–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É! ‚≠ê

## –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π CQRS –≤ Go

CQRS (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤) –±—ã–ª–æ 
–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ [–æ–ø–∏—Å–∞–Ω–æ –ì—Ä–µ–≥–æ–º –Ø–Ω–≥–æ–º](https://cqrs.files.wordpress.com/2010/11/cqrs_documents.pdf). **–û–Ω–æ 
–æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ –ø—Ä–æ—Å—Ç–æ–º —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏: –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π –±–æ–ª—å—à–æ–π –º–æ–¥–µ–ª–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è 
–∏ –∑–∞–ø–∏—Å–∏ —É –≤–∞—Å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏. –û–¥–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ –æ–¥–Ω–∞ –¥–ª—è 
—á—Ç–µ–Ω–∏—è.** –û–Ω–æ —Ç–∞–∫–∂–µ –∑–Ω–∞–∫–æ–º–∏—Ç —Å –ø–æ–Ω—è—Ç–∏—è–º–∏ _–∫–æ–º–∞–Ω–¥_ –∏ _–∑–∞–ø—Ä–æ—Å–æ–≤_ –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ 
—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∏–ø–∞: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ 
–∑–∞–ø—Ä–æ—Å–æ–≤.

![non-cqrs](images/part10/non-cqrs-architecture.jpg)
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è, –Ω–µ CQRS –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

![cqrs](images/part10/cqrs-architecture.jpg)
CQRS –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## –û—Ç–ª–∏—á–∏–µ –∫–æ–º–∞–Ω–¥—ã –æ—Ç –∑–∞–ø—Ä–æ—Å–∞

–ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è: **–∑–∞–ø—Ä–æ—Å –Ω–µ –¥–æ–ª–∂–µ–Ω –Ω–∏—á–µ–≥–æ –∏–∑–º–µ–Ω—è—Ç—å, –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ. –ö–æ–º–∞–Ω–¥–∞
–Ω–∞–ø—Ä–æ—Ç–∏–≤: –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º—É, –Ω–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.**
–ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –Ω–∞—à–∏ –∑–∞–ø—Ä–æ—Å—ã –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –∏ –º—ã —Å–Ω–∏–∂–∞–µ–º 
—Å–ª–æ–∂–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥.

–≠—Ç–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å–µ—Ä—å–µ–∑–Ω—ã–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º, –Ω–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ –Ω–µ —Ç–∞–∫. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ 
–≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –Ω–∞–º–∏ –æ–ø–µ—Ä–∞—Ü–∏–π ‚Äî —ç—Ç–æ —á—Ç–µ–Ω–∏–µ –∏–ª–∏ –∑–∞–ø–∏—Å—å. –û—á–µ–Ω—å —Ä–µ–¥–∫–æ –∏ —Ç–æ, –∏ –¥—Ä—É–≥–æ–µ.

–ö–æ–Ω–µ—á–Ω–æ, –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –º—ã –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ 
–∏–ª–∏ –º–µ—Ç—Ä–∏–∫–∏, –∫–∞–∫ –∏–∑–º–µ–Ω—è—é—â–∏–µ —á—Ç–æ-—Ç–æ. –î–ª—è –∫–æ–º–∞–Ω–¥ —Ç–∞–∫–∂–µ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 
–æ—à–∏–±–∫—É.

> –ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –ø—Ä–∞–≤–∏–ª, –∏—Ö –º–æ–∂–Ω–æ –Ω–∞—Ä—É—à–∏—Ç—å‚Ä¶ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤—ã 
> –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ **–ø–æ–Ω–∏–º–∞–µ—Ç–µ, –ø–æ—á–µ–º—É –æ–Ω–∏ –±—ã–ª–∏ –≤–≤–µ–¥–µ–Ω—ã –∏ –∫–∞–∫–∏–µ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã** –≤—ã –∏–¥–µ—Ç–µ.
> –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤–∞–º —Ä–µ–¥–∫–æ –ø—Ä–∏–¥—ë—Ç—Å—è –Ω–∞—Ä—É—à–∞—Ç—å —ç—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞. –ü–æ–¥–µ–ª—é—Å—å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –≤ 
> –∫–æ–Ω—Ü–µ —Å—Ç–∞—Ç—å–∏.

–ö–∞–∫ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤—ã–≥–ª—è–¥–∏—Ç —Å–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è? –í [–ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç–∞—Ç—å–µ](https://threedots.tech/post/introducing-clean-architecture/) –ú–∏–ª–æ—à 
–≤–≤—ë–ª —Å–µ—Ä–≤–∏—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.
–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω—ë–º —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ 
–∑–∞–ø—Ä–æ—Å–æ–≤.

## –ö–æ–º–∞–Ω–¥–∞ ApproveTrainingReschedule

–†–∞–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–ª–æ—Å—å –∏–∑ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
`TrainingService`.

```shell
- func (c TrainingService) ApproveTrainingReschedule(ctx context.Context, user auth.User, trainingUUID string) error {
-  return c.repo.ApproveTrainingReschedule(ctx, trainingUUID, func(training Training) (Training, error) {
-     if training.ProposedTime == nil {
-        return Training{}, errors.New("training has no proposed time")
-     }
-     if training.MoveProposedBy == nil {
-        return Training{}, errors.New("training has no MoveProposedBy")
-     }
-     if *training.MoveProposedBy == "trainer" && training.UserUUID != user.UUID {
-        return Training{}, errors.Errorf("user '%s' cannot approve reschedule of user '%s'", user.UUID, training.UserUUID)
-     }
-     if *training.MoveProposedBy == user.Role {
-        return Training{}, errors.New("reschedule cannot be accepted by requesting person")
-     }
-
-     training.Time = *training.ProposedTime
-     training.ProposedTime = nil
-
-     return training, nil
-  })
- }
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/commit/8d9274811559399461aa9f6bf3829316b8ddfb63#diff-ddf06fa26668dd91e829c7bfbd68feaeL127](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/commit/8d9274811559399461aa9f6bf3829316b8ddfb63#diff-ddf06fa26668dd91e829c7bfbd68feaeL127)

–¢–∞–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏. –¢–µ–ø–µ—Ä—å –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ
–ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏. –Ø —Ç–∞–∫–∂–µ –æ–±–Ω–∞—Ä—É–∂–∏–ª, —á—Ç–æ –º—ã –∑–∞–±—ã–ª–∏ –≤—ã–∑–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å 
trainer, —á—Ç–æ–±—ã –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É. –û–π. üòâ –î–∞–≤–∞–π—Ç–µ –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–∏—Ä–∏–º —ç—Ç–æ –¥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è 
CQRS.

–ü–æ—Å–∫–æ–ª—å–∫—É CQRS –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏, —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø—Ä–∏–Ω—Ü–∏–ø—É –ø—Ä–µ–¥–º–µ—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ
–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–æ –≤—Ä–µ–º—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ CQRS —è —Ç–∞–∫–∂–µ –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–ª 
—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–µ–ª–∏, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–º—É DDD. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π 
DDD –æ–ø–∏—Å–∞–Ω –≤ [–ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç–∞—Ç—å–µ](https://threedots.tech/post/ddd-lite-in-go-introduction/).

–ú—ã –Ω–∞—á–∏–Ω–∞–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é _–∫–æ–º–∞–Ω–¥—ã_ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–∞–Ω–¥—ã. –≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ 
–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã. –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞
—Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –ø–æ–ª–µ, –º–æ–∂–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ
–∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä.

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ —Ç–∏–ø—ã, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏, 
–Ω–∞–ø—Ä–∏–º–µ—Ä, `training.User` –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ. –ù–∞–º –Ω–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ 
—Ç–∏–ø–æ–≤ –ø–æ–∑–∂–µ, –∏ —É –Ω–∞—Å –µ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤. **–≠—Ç–æ –º–æ–∂–µ—Ç –∏–∑–±–∞–≤–∏—Ç—å –Ω–∞—Å 
–æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–æ–±–ª–µ–º, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ 
–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.**

```go
package command

// ...

type ApproveTrainingReschedule struct {
    TrainingUUID string
    User         training.User
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/app/command/approve_training_reschedule.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/app/command/approve_training_reschedule.go#L10)

–í—Ç–æ—Ä–∞—è —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è ‚Äî —ç—Ç–æ _–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã_, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è—Ç—å 
–∫–æ–º–∞–Ω–¥—É.

```go
package command

// ...

func (h ApproveTrainingRescheduleHandler) Handle(ctx context.Context, cmd ApproveTrainingReschedule) (err error) {
    defer func() {
        logs.LogCommandExecution("ApproveTrainingReschedule", cmd, err)
    }()

    return h.repo.UpdateTraining(
        ctx,
        cmd.TrainingUUID,
        cmd.User,
        func(ctx context.Context, tr *training.Training) (*training.Training, error) {
            originalTrainingTime := tr.Time()
    
            if err := tr.ApproveReschedule(cmd.User.Type()); err != nil {
                return nil, err
            }
    
            err := h.trainerService.MoveTraining(ctx, tr.Time(), originalTrainingTime)
            if err != nil {
                return nil, err
            }
    
            return tr, nil
        },
    )
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/app/command/approve_training_reschedule.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/app/command/approve_training_reschedule.go#L39)

–¢–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π —Å—Ç–∞–ª–æ –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ. –í—ã —á–µ—Ç–∫–æ –≤–∏–¥–∏—Ç–µ, —á—Ç–æ
–º—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ `*training.Training`
–∏ –µ—Å–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫, –≤—ã–∑—ã–≤–∞–µ–º –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å `trainer`. –ë–ª–∞–≥–æ–¥–∞—Ä—è
–º–µ—Ç–æ–¥–∏–∫–∞–º, –æ–ø–∏—Å–∞–Ω–Ω—ã–º –≤ [—Å—Ç–∞—Ç—å–µ —Å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–º DDD](https://threedots.tech/post/ddd-lite-in-go-introduction/),
–æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É –∫–æ–º–∞–Ω–¥ –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å, –∫–æ–≥–¥–∞ –æ–Ω –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç—É –æ–ø–µ—Ä–∞—Ü–∏—é.
–í—Å–µ–º —ç—Ç–∏–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –Ω–∞—à —Å–ª–æ–π –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏.

–≠—Ç–∞ —á–µ—Ç–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –µ—â—ë –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω–∞ –≤ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–∞—Ö. –ö 
—Å—á–∞—Å—Ç—å—é, —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–∞. –≠—Ç–æ —Ö–æ—Ä–æ—à–æ. **–ù–∞—à–∞ —Ü–µ–ª—å ‚Äî 
—Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ —Å–ª–æ–∂–Ω–æ–µ, –∞ –ø—Ä–æ—Å—Ç–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ.**

–ï—Å–ª–∏ CQRS - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ, –æ–Ω —Ç–∞–∫–∂–µ
—É—Å–∫–æ—Ä—è–µ—Ç –∏–∑—É—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –≤–∞—à–∏–º–∏ —Ç–æ–≤–∞—Ä–∏—â–∞–º–∏ –ø–æ –∫–æ–º–∞–Ω–¥–µ, –∫–æ—Ç–æ—Ä—ã–µ –µ–≥–æ –Ω–µ –∑–Ω–∞—é—Ç.
–í–∞–º –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–µ–Ω —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, 
–∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. –ò—Å–∫–∞—Ç—å –∫–∞–∫ —Å—É–º–∞—Å—à–µ–¥—à–∏–π –≤ —Å–ª—É—á–∞–π–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –∫–æ–¥–∞
–Ω–µ –Ω—É–∂–Ω–æ.

–í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ –æ–¥–Ω–æ–º –∏–∑ —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–µ–π –∫–æ–º–∞–Ω–¥—ã:

![comlex-command](images/part10/complex-command.jpg)
–ü—Ä–∏–º–µ—Ä —Å–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –≤ [Karhoo](https://www.karhoo.com/).

–í—ã –º–æ–∂–µ—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å - –Ω–µ —Å—Ç–æ–∏—Ç –ª–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —ç—Ç–æ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤?
**–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ –±—ã–ª–æ –±—ã —É–∂–∞—Å–Ω–æ–π –∏–¥–µ–µ–π.** –ú–Ω–æ–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã 
–ø–æ –≤—Ä–µ–º–µ–Ω–∏. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –ø–æ—Ç—Ä–µ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö 
—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (_–°–∞–≥_). –≠—Ç–æ —Å–¥–µ–ª–∞–ª–æ –±—ã —ç—Ç—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π,
—Ç—Ä—É–¥–Ω–æ–π –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –∏ –æ—Ç–ª–∞–¥–∫–µ. –≠—Ç–æ –Ω–µ –ª—É—á—à–∞—è –∏–¥–µ—è.

–¢–∞–∫–∂–µ —Å—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤—Å–µ —ç—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–µ. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∑–¥–µ—Å—å 
–æ—Ç–ª–∏—á–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ.** –í—Å–∫–æ—Ä–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –≤–∞–∂–Ω—É—é 
—Ç–µ–º—É —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ. –Ø —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª, —á—Ç–æ –º—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ 
—Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Ö —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤ Wild Workouts? üòâ

–ù–æ –≤–µ—Ä–Ω–µ–º—Å—è –∫ –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ. –ü—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤ –Ω–∞—à–µ–º HTTP-–ø–æ—Ä—Ç—É.
–û–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –≤ `HttpServer` —á–µ—Ä–µ–∑ –≤–Ω–µ–¥—Ä–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É `Application`, –∫–æ—Ç–æ—Ä–∞—è 
—Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–∞—à–∏ –∫–æ–º–∞–Ω–¥—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

```go
package app

import (
    "github.com/MaksimDzhangirov/three-dots/part10/internal/trainings/app/command"
    "github.com/MaksimDzhangirov/three-dots/part10/internal/trainings/app/query"
)

type Application struct {
    Commands Commands
    Queries  Queries
}

type Commands struct {
    ApproveTrainingReschedule command.ApproveTrainingRescheduleHandler
    CancelTraining            command.CancelTrainingHandler
    // ...
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/app/app.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/app/app.go#L8)

```go
type HttpServer struct {
    app app.Application
}

// ...

func (h HttpServer) ApproveRescheduleTraining(w http.ResponseWriter, r *http.Request, trainingUUID string) {
    trainingUUID = chi.URLParam(r, "trainingUUID")

    user, err := newDomainUserFromAuthUser(r.Context())
    if err != nil {
        httperr.RespondWithSlugError(err, w, r)
        return
    }

    err = h.app.Commands.ApproveTrainingReschedule.Handle(r.Context(), command.ApproveTrainingReschedule{
        User:         user,
        TrainingUUID: trainingUUID,
    })
    if err != nil {
        httperr.RespondWithSlugError(err, w, r)
        return
    }
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/ports/http.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/ports/http.go#L160)

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ –∏–∑ –ª—é–±–æ–≥–æ –ø–æ—Ä—Ç–∞: HTTP, gRPC –∏–ª–∏ 
CLI. –≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∏ [–∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–∫—Å—Ç—É—Ä](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainer/fixtures.go#L62) (–º—ã —É–∂–µ 
–¥–µ–ª–∞–µ–º —ç—Ç–æ –≤ Wild Workouts).

### –ö–æ–º–∞–Ω–¥–∞ RequestTrainingReschedule

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã–º–∏.

```go
func (h RequestTrainingRescheduleHandler) Handle(ctx context.Context, cmd RequestTrainingReschedule) (err error) {
    defer func() {
        logs.LogCommandExecution("RequestTrainingReschedule", cmd, err)
    }()
  
    return h.repo.UpdateTraining(
        ctx,
        cmd.TrainingUUID,
        cmd.User,
        func(ctx context.Context, tr *training.Training) (*training.Training, error) {
            if err := tr.UpdateNotes(cmd.NewNotes); err != nil {
                return nil, err
            }
  
            tr.ProposeReschedule(cmd.NewTime, cmd.User.Type())
  
            return tr, nil
        },
    )
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/app/command/request_training_reschedule.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/app/command/request_training_reschedule.go#L32)

–ú–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å —Å–æ–±–ª–∞–∑–Ω –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —Å–ª–æ–π –¥–ª—è —Ç–∞–∫–∏—Ö –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤, —á—Ç–æ–±—ã
–Ω–µ –ø–∏—Å–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –∫–æ–¥. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å,
—á—Ç–æ **–Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ –≤—Å–µ–≥–¥–∞ –Ω–∞–º–Ω–æ–≥–æ –¥–µ—à–µ–≤–ª–µ, —á–µ–º –µ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∞. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–æ–≥–æ 
–ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–∏–ø–∞ - 3 –º–∏–Ω—É—Ç—ã —Ä–∞–±–æ—Ç—ã. –õ—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–∂–µ –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å –∏ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è 
–≤ —ç—Ç–æ—Ç –∫–æ–¥, –æ—Ü–µ–Ω—è—Ç —ç—Ç–∏ —É—Å–∏–ª–∏—è.**

### –ó–∞–ø—Ä–æ—Å AvailableHoursHandler

–ó–∞–ø—Ä–æ—Å—ã –≤ —Å–ª–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–±—ã—á–Ω–æ –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–µ. –í —Å–∞–º–æ–º –æ–±—â–µ–º —Å–ª—É—á–∞–µ –Ω–∞–º 
–Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å _–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥–µ–ª–∏ —á—Ç–µ–Ω–∏—è_ (`AvailableHoursReadModel`), –∫–æ—Ç–æ—Ä—ã–π 
–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫ –º—ã –º–æ–∂–µ–º –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.

–ö–æ–º–∞–Ω–¥—ã –∏ –∑–∞–ø—Ä–æ—Å—ã —Ç–∞–∫–∂–µ —è–≤–ª—è—é—Ç—Å—è –æ—Ç–ª–∏—á–Ω—ã–º –º–µ—Å—Ç–æ–º –¥–ª—è [—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–æ–∂–Ω–æ 
–∫—É–¥–∞-—Ç–æ –≤—ã–¥–µ–ª–∏—Ç—å](https://en.wikipedia.org/wiki/Cross-cutting_concern), –Ω–∞–ø—Ä–∏–º–µ—Ä,
–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π. –ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ–º—É, —á—Ç–æ –æ–Ω–∏ —Ä–∞–∑–º–µ—â–µ–Ω—ã 
–∑–¥–µ—Å—å, –º—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç 
—Ç–æ–≥–æ, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ –æ–Ω–∏ –∏–∑ –ø–æ—Ä—Ç–∞ HTTP –∏–ª–∏ gRPC.

```go
package query

// ...

type AvailableHoursHandler struct {
    readModel AvailableHoursReadModel
}

type AvailableHoursReadModel interface {
    AvailableHours(ctx context.Context, from time.Time, to time.Time) ([]Date, error)
}

// ...

type AvailableHours struct {
    From time.Time
    To   time.Time
}

func (h AvailableHoursHandler) Handle(ctx context.Context, query AvailableHours) (d []Date, err error) {
    start := time.Now()
    defer func() {
        logrus.
            WithError(err).
            WithField("duration", time.Since(start)).
            Debug("AvailableHoursHandler executed")
    }()
  
    if query.From.After(query.To) {
        return nil, errors.NewIncorrectInputError("date-from-after-date-to", "Date from after date to")
    }
  
    return h.readModel.AvailableHours(ctx, query.From, query.To)
}

```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainer/app/query/available_hours.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainer/app/query/available_hours.go#L11)

–ù–∞–º —Ç–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–∞–ø—Ä–æ—Å–æ–º. –í –Ω–∞—à–µ–º 
—Å–ª—É—á–∞–µ —ç—Ç–æ `query.Date`.

```go
package query

type Date struct {
    Date         time.Time
    HasFreeHours bool
    Hours        []Hour
}

type Hour struct {
    Available            bool
    HasTrainingScheduled bool
    Hour                 time.Time
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainer/app/query/types.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainer/app/query/types.go)

–ù–∞—à–∞ –º–æ–¥–µ–ª—å –∑–∞–ø—Ä–æ—Å–∞ —Å–ª–æ–∂–Ω–µ–µ, —á–µ–º —Ç–∏–ø –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ `hour.Hour`. –≠—Ç–æ 
—Ç–∏–ø–∏—á–Ω—ã–π —Å–ª—É—á–∞–π. –ß–∞—Å—Ç–æ —ç—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –≤–µ–±-—Å–∞–π—Ç–∞,
–∏ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±–µ–∫–µ–Ω–¥–∞.

–ü–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤
–º–æ–≥—É—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è. **–ë–ª–∞–≥–æ–¥–∞—Ä—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—é —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –º—ã –º–æ–∂–µ–º 
–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω–∏—Ö.** –≠—Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±—ã—Å—Ç—Ä–æ–π 
—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ.

```go
package hour

type Hour struct {
    hour time.Time
  
    availability Availability
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainer/domain/hour/hour.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainer/domain/hour/hour.go#L11)

–ù–æ –æ—Ç–∫—É–¥–∞ `AvailableHoursReadModel` –±–µ—Ä—ë—Ç –¥–∞–Ω–Ω—ã–µ? –î–ª—è —Å–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
–ø—Ä–æ–∑—Ä–∞—á–µ–Ω –∏ –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å 
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –±—É–¥—É—â–µ–º, –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

> –ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–∫–æ–º—ã —Å –ø–æ–Ω—è—Ç–∏—è–º–∏ _–ø–æ—Ä—Ç—ã_ –∏ _–∞–¥–∞–ø—Ç–µ—Ä—ã_, —è –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é 
> –ø—Ä–æ—á–∏—Ç–∞—Ç—å –Ω–∞—à—É [—Å—Ç–∞—Ç—å—é –æ —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –≤ Go](https://threedots.tech/post/introducing-clean-architecture/).

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ **–∏–∑ –Ω–∞—à–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ç–æ–π –∂–µ, –∫—É–¥–∞
–æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –º–æ–¥–µ–ª–µ–π –∑–∞–ø–∏—Å–∏.** –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ [—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/adapters/trainings_firestore_repository.go#L170) –º–æ–¥–µ–ª–∏ 
—á—Ç–µ–Ω–∏—è [AllTrainings](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/app/query/all_trainings.go#L19)
–∏ [—Ç–µ—Å—Ç—ã](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/adapters/trainings_firestore_repository_test.go#L152) –¥–ª—è `DatesFirestoreRepository` –≤ —Å–ª–æ–µ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤.

![cqrs](images/part10/cqrs-architecture.jpg)
–î–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–∞—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –∏–∑ —Ç–æ–π –∂–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –º–æ–¥–µ–ª–∏ –∑–∞–ø–∏—Å–∏.

–ï—Å–ª–∏ –≤—ã —á–∏—Ç–∞–ª–∏ –æ CQRS —Ä–∞–Ω–µ–µ, —á–∞—Å—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ 
–æ—Ç–¥–µ–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ö–æ—Ä–æ—à–µ–π 
–∏–¥–µ–µ–π, –Ω–æ –≤ –æ—á–µ–Ω—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–ª—É—á–∞—è—Ö. –Ø –æ–ø–∏—à—É —ç—Ç–æ –≤ —Ä–∞–∑–¥–µ–ª–µ _¬´–ë—É–¥—É—â–∏–µ 
–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏¬ª_. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö 
–∫—É–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å—å —Å –ø–æ–º–æ—â—å—é –º–æ–¥–µ–ª–µ–π –∑–∞–ø–∏—Å–∏.

## –ó–∞–ø—Ä–æ—Å HourAvailabilityHandler

–ù–∞–º –Ω–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å _–º–æ–¥–µ–ª–∏ —á—Ç–µ–Ω–∏—è_ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –¢–∞–∫–∂–µ 
–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –∏ –≤—ã–±–∏—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–µ –Ω–∞–º –¥–∞–Ω–Ω—ã–µ.

```go
import (
    "context"
    "time"
  
    "github.com/MaksimDzhangirov/three-dots/part10/internal/trainer/domain/hour"
)

type HourAvailabilityHandler struct {
      hourRepo hour.Repository
}

func (h HourAvailabilityHandler) Handle(ctx context.Context, time time.Time) (bool, error) {
    hour, err := h.hourRepo.GetOrCreateHour(ctx, time)
    if err != nil {
        return false, err
    }
  
    return hour.IsAvailable(), nil
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainer/app/query/hour_availability.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainer/app/query/hour_availability.go#L22)

## –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ

–í—ã–±–æ—Ä –Ω–∞–∑–≤–∞–Ω–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö - –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö –∏ –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã—Ö —á–∞—Å—Ç–µ–π
—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. –í —Å—Ç–∞—Ç—å–µ [–í–≤–µ–¥–µ–Ω–∏–µ –≤ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–µ DDD](https://threedots.tech/post/ddd-lite-in-go-introduction/)
—Å–æ–≥–ª–∞—Å–Ω–æ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —è–∑—ã–∫–∞, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–≥–æ –∫ 
—Ç–æ–º—É, –∫–∞–∫ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—é—Ç –ª—é–¥–∏, –Ω–µ —è–≤–ª—è—é—â–∏–µ—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏ (–∞ –æ—Ç–≤–µ—á–∞—é—â–∏–µ 
–∑–∞ –±–∏–∑–Ω–µ—Å). –≠—Ç–æ —Ç–∞–∫–∂–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∏–º–µ–Ω–∞–º –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

–°–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å —Ç–∞–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π, –∫–∞–∫ ¬´–°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É¬ª –∏–ª–∏ ¬´–£–¥–∞–ª–∏—Ç—å 
—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É¬ª. **–≠—Ç–æ –Ω–µ —Ç–æ, –∫–∞–∫ –±–∏–∑–Ω–µ—Å –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–Ω–∏–º–∞—é—Ç –≤–∞—à—É –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é 
–æ–±–ª–∞—Å—Ç—å. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ¬´–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É¬ª –∏ 
¬´–û—Ç–º–µ–Ω–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É¬ª.**

![trainer-cqrs](images/part10/trainer-cqrs.png)
[–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏ –∑–∞–ø—Ä–æ—Å—ã —Å–µ—Ä–≤–∏—Å–∞ trainings](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/tree/8d9274811559399461aa9f6bf3829316b8ddfb63/internal/trainings/app)

–ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —ç—Ç—É —Ç–µ–º—É –≥–ª—É–±–∂–µ –≤ —Å—Ç–∞—Ç—å–µ –æ –ï–¥–∏–Ω–æ–º –Ø–∑—ã–∫–µ. –ê –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–æ–π–¥–∏—Ç–µ –∫
–ª—é–¥—è–º, –æ—Ç–≤–µ—á–∞—é—â–∏–º –∑–∞ –±–∏–∑–Ω–µ—Å, –∏ –ø–æ—Å–ª—É—à–∞–π—Ç–µ, –∫–∞–∫ –æ–Ω–∏ –Ω–∞–∑—ã–≤–∞—é—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏. –ü–æ–¥—É–º–∞–π—Ç–µ –¥–≤–∞–∂–¥—ã,
–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–∏—Ö –∫–æ–º–∞–Ω–¥ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å–æ —Å–ª–æ–≤ ¬´–°–æ–∑–¥–∞—Ç—å/–£–¥–∞–ª–∏—Ç—å/–û–±–Ω–æ–≤–∏—Ç—å¬ª.

## –ë—É–¥—É—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–ë–∞–∑–æ–≤—ã–π CQRS –¥–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ **–ª—É—á—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞, 
—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∏ —É–ø—Ä–æ—â–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π.** –ï—Å—Ç—å –∏ –æ–¥–Ω–æ, –µ—â–µ –±–æ–ª–µ–µ –≤–∞–∂–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ. –≠—Ç–æ 
**–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–∏—Ç—å CQRS –±–æ–ª–µ–µ –º–æ—â–Ω—ã–º–∏ –∏ —Å–ª–æ–∂–Ω—ã–º–∏** —à–∞–±–ª–æ–Ω–∞–º–∏.

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ —Å–≤–æ–µ–π –ø—Ä–∏—Ä–æ–¥–µ. –û–Ω–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å 
–∫–∞–∫–∏–µ-—Ç–æ –≤–Ω–µ—à–Ω–∏–µ –≤—ã–∑–æ–≤—ã –∏–ª–∏ —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã –º–æ–∂–µ–º –≤–≤–µ—Å—Ç–∏ 
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –ö–æ–º–∞–Ω–¥–Ω—É—é –®–∏–Ω—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ 
—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ, —Ç–∞–∫–∏–µ –∫–∞–∫ –Ω–∞–ª–∏—á–∏–µ –æ—á–µ—Ä–µ–¥–∏ –∏–ª–∏ —à–∞–±–ª–æ–Ω–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è 
–∏–∑–¥–∞—Ç–µ–ª—å/–ø–æ–¥–ø–∏—Å—á–∏–∫. –ö —Å—á–∞—Å—Ç—å—é, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ [Watermill](https://github.com/ThreeDotsLabs/watermill) –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –≤–∞–º —Å —ç—Ç–∏–º –≤ Go.
–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Watermill –ø–æ CQRS](https://watermill.io/docs/cqrs/). (–ö—Å—Ç–∞—Ç–∏,
–º—ã —Ç–∞–∫–∂–µ —è–≤–ª—è–µ–º—Å—è –∞–≤—Ç–æ—Ä–∞–º–∏ Watermill üòâ –ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –Ω–∞–º, –µ—Å–ª–∏ 
—á—Ç–æ-—Ç–æ —Ç–∞–º –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ!).

### –û—Ç–¥–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

–ù–∞—à–∞ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —á—Ç–µ–Ω–∏—è 
(–∑–∞–ø—Ä–æ—Å–æ–≤) –∏ –∑–∞–ø–∏—Å–∏ (–∫–æ–º–∞–Ω–¥). –ï—Å–ª–∏ –±—ã —É –Ω–∞—Å –±—ã–ª–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–ª–∏ 
–Ω–∞–º –Ω—É–∂–Ω–æ –±—ã–ª–æ –±—ã –±—ã—Å—Ç—Ä–æ —Å—á–∏—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –º—ã –º–æ–≥–ª–∏ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥–∏–∫—É 
_—Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â–∞—Ö_. –ò–¥–µ—è —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å 
–∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –≤ –¥—Ä—É–≥–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, 
–º—ã –º–æ–≥–ª–∏ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Elastic –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ 
–±—ã–ª–æ –±—ã –ª–µ–≥—á–µ –∏—Å–∫–∞—Ç—å –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å.

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ _—Å–æ–±—ã—Ç–∏—è_. –û–¥–Ω–∏–º –∏–∑ 
–Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã—Ö —Å–ª–µ–¥—Å—Ç–≤–∏–π —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–π–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å.
–í—ã –¥–æ–ª–∂–Ω—ã –≤—ã—è—Å–Ω–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º—ã–º –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–º –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ.
–ï—Å–ª–∏ –≤—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–∞—Ç—å –±–µ–∑ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö 
—Ö—Ä–∞–Ω–∏–ª–∏—â–∞—Ö –∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ –ø–æ–∑–∂–µ. –¢–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è, –∫–∞–∫ —ç—Ç–æ, 
–ª—É—á—à–µ –æ—Ç–ª–æ–∂–∏—Ç—å.

–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–∫–∂–µ –æ–ø–∏—Å–∞–Ω –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Watermill –ø–æ CQRS](https://watermill.io/docs/cqrs/?utm_source=cqrs-art#building-a-read-model-with-the-event-handler). –ú–æ–∂–µ—Ç –±—ã—Ç—å, 
—Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –º—ã –¥–æ–±–∞–≤–∏–º –µ–≥–æ –∏ –≤ Wild Workouts, –∫—Ç–æ –∑–Ω–∞–µ—Ç?

![polyglot-persistence](images/part10/cqrs-polyglot-persistence.jpg)
CQRS —Å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â–∞—Ö

### Event-Sourcing

–ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–æ —Å—Ç—Ä–æ–≥–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ –∞—É–¥–∏—Ç—É, –≤–∞–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
—Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –º–µ—Ç–æ–¥–∏–∫—É _–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π_. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ
–≤—Ä–µ–º—è —è —Ä–∞–±–æ—Ç–∞—é –≤ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å—Ñ–µ—Ä–µ, _–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π_ - –º–µ—Ç–æ–¥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è 
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π 
–∞—É–¥–∏—Ç –∏ –ø–æ–º–æ–≥–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ—à–∏–±–æ–∫.

CQRS —á–∞—Å—Ç–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å _–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–æ–±—ã—Ç–∏–π_. –ü—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º, —á—Ç–æ –ø–æ
–∑–∞–º—ã—Å–ª—É –≤ —Å–∏—Å—Ç–µ–º–∞—Ö, –≥–¥–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è, –º—ã —Ö—Ä–∞–Ω–∏–º –º–æ–¥–µ–ª—å –Ω–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ,
–≥–æ—Ç–æ–≤–æ–º –¥–ª—è —á—Ç–µ–Ω–∏—è (–∑–∞–ø—Ä–æ—Å–æ–≤), –∞ –ø—Ä–æ—Å—Ç–æ –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö 
–¥–ª—è –∑–∞–ø–∏—Å–∏ (–∫–æ–º–∞–Ω–¥). –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, —Å–ª–æ–∂–Ω–µ–µ –≤—ã–¥–∞–≤–∞—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ API –æ—Ç–≤–µ—Ç—ã.

–ë–ª–∞–≥–æ–¥–∞—Ä—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é –º–æ–¥–µ–ª–µ–π _–∫–æ–º–∞–Ω–¥_ –∏ _–∑–∞–ø—Ä–æ—Å–æ–≤_ —ç—Ç–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª—å—à–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π.
–ù–∞—à–∏ –º–æ–¥–µ–ª–∏ —á—Ç–µ–Ω–∏—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ —Å —É—á—ë—Ç–æ–º —Ç–æ–≥–æ –∫–∞–∫ –æ–Ω–∏ 
—Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã.

–ï—Å—Ç—å —Ç–∞–∫–∂–µ –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ 
–≤–∏–¥–Ω—ã –≤ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –ù–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∏—Ö –¥–ª—è –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π —Å—Ç–∞—Ç—å–∏. üòâ –ê 
–ø–æ–∫–∞ –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–Ω–∏–≥–æ–π –ì—Ä–µ–≥–∞ –Ø–Ω–≥–∞ - [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 
–≤–µ—Ä—Å–∏—è–º–∏ –≤ —Å–∏—Å—Ç–µ–º–µ, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö](https://leanpub.com/esversioning). –¢–æ—Ç 
—Å–∞–º—ã–π –ì—Ä–µ–≥ –Ø–Ω–≥, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å–∞–ª CQRS.

## –ö–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CQRS?

CQRS ‚Äî —ç—Ç–æ –Ω–µ —Å–µ—Ä–µ–±—Ä—è–Ω–∞—è –ø—É–ª—è, –∫–æ—Ç–æ—Ä–∞—è –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –≤–µ–∑–¥–µ. –•–æ—Ä–æ—à–∏–π –ø—Ä–∏–º–µ—Ä 
‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è. –í—ã —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, –∞ –≤–∑–∞–º–µ–Ω –ø–æ–ª—É—á–∞–µ—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, 
–µ—Å–ª–∏ –≤—Å–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –∫–∞–∫–æ–π-—Ç–æ —Ç–æ–∫–µ–Ω.

–ï—Å–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ—Å—Ç–æ–π CRUD, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –∏ 
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ, —ç—Ç–æ —Ç–æ–∂–µ –Ω–µ –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è CQRS. –í–æ—Ç –ø–æ—á–µ–º—É 
–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å `users` –≤ Wild Workouts –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ CQRS.
–í –ø—Ä–æ—Å—Ç—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∞–Ω–Ω—ã–µ, —ç—Ç–∏ —à–∞–±–ª–æ–Ω—ã –æ–±—ã—á–Ω–æ –Ω–µ –∏–º–µ—é—Ç 
—Å–º—ã—Å–ª–∞. –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –≤—ã –¥–æ–ª–∂–Ω—ã —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Ç–∞–∫–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏. –ï—Å–ª–∏ –≤—ã 
–∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ –ª–æ–≥–∏–∫–∞ —Ä–∞–∑—Ä–∞—Å—Ç–∞–µ—Ç—Å—è, –∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ–π, –º–æ–∂–µ—Ç 
–±—ã—Ç—å, –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞?

### –í–æ–∑–≤—Ä–∞—Ç —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ API —Å CQRS

–Ø –∑–Ω–∞—é, —á—Ç–æ —É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ª—é–¥–µ–π –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CQRS –¥–ª—è REST 
API, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ POST –∑–∞–ø—Ä–æ—Å. –†–∞–∑–≤–µ —ç—Ç–æ
–Ω–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç CQRS? –ù–µ —Å–æ–≤—Å–µ–º! –í—ã –º–æ–∂–µ—Ç–µ —Ä–µ—à–∏—Ç—å –µ–µ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

1. –í—ã–∑–æ–≤–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ HTTP –ø–æ—Ä—Ç –∏ –ø–æ—Å–ª–µ –µ—ë —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –≤—ã–∑–æ–≤–∏—Ç–µ 
   –∑–∞–ø—Ä–æ—Å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ,
2. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å, –≤–µ—Ä–Ω–∏—Ç–µ HTTP-–∫–æ–¥ `204` —Å 
   –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `content-location` —Ä–∞–≤–Ω—ã–º URL —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞. 

–í—Ç–æ—Ä–æ–π —Å–ø–æ—Å–æ–± –Ω–∞ –º–æ–π –≤–∑–≥–ª—è–¥ –ª—É—á—à–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å 
—Å–æ–∑–¥–∞–Ω–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å (–¥–∞–∂–µ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç—É –Ω–µ –Ω—É–∂–Ω—ã —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ). –ü—Ä–∏ –≤—Ç–æ—Ä–æ–º –ø–æ–¥—Ö–æ–¥–µ
–∫–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –û–Ω —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç
–±—ã—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω –ø—Ä–∏ —ç—Ç–æ–º –≤—ã–∑–æ–≤–µ.

–í–æ–ø—Ä–æ—Å —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º, –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏? –û–±—ã—á–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π 
—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ UUID –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –≤ –∫–æ–º–∞–Ω–¥–µ.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ª–∂–Ω—ã–º 
–æ–±—Ä–∞–∑–æ–º, –µ—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ –±—É–¥–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º. –ï—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å 
—Å UUID, –≤ –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å ID –∏–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ ‚Äî —ç—Ç–æ –Ω–µ –∫–æ–Ω–µ—Ü 
—Å–≤–µ—Ç–∞. üòâ

```go
cmd := command.ScheduleTraining{
    TrainingUUID: uuid.New().String(),
    UserUUID:     user.UUID,
    UserName:     user.DisplayName,
    TrainingTime: postTraining.Time,
    Notes:        postTraining.Notes,
}
err = h.app.Commands.ScheduleTraining.Handle(r.Context(), cmd)
if err != nil {
    httperr.RespondWithSlugError(err, w, r)
    return
}

w.Header().Set("content-location", "/trainings/"+cmd.TrainingUUID)
w.WriteHeader(http.StatusNoContent)
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/ports/http.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/ports/http.go#L70)

## –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å CQRS –≤ —Å–≤–æ–µ —Ä–µ–∑—é–º–µ!

–ú—ã —ç—Ç–æ —Å–¥–µ–ª–∞–ª–∏ ‚Äî —É –Ω–∞—Å –µ—Å—Ç—å –±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è CQRS –≤ Wild Workouts. –í—ã —Ç–∞–∫–∂–µ 
–¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ —Ç–æ–º, –∫–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—É–¥—É—â–µ–º.

–ü—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫–æ–¥–∞ –¥–ª—è —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏ —è —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–¥–µ–ª–∞–ª —Å–µ—Ä–≤–∏—Å trainer –≤ 
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å DDD. –Ø —Ä–∞—Å—Å–∫–∞–∂—É –æ–± —ç—Ç–æ–º –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç–∞—Ç—å–µ. –•–æ—Ç—è –≤–µ—Å—å –∫–æ–¥ —É–∂–µ
–¥–æ—Å—Ç—É–ø–µ–Ω –≤ –Ω–∞—à–µ–º [GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/commit/8d9274811559399461aa9f6bf3829316b8ddfb63).

–ù–∞–ª–∏—á–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–æ–º–∞–Ω–¥ –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ —Ç–∞–∫–∂–µ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ 
—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –¥–ª—è –Ω–∏—Ö –ø—Ä–æ—â–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –≠—Ç–∞ —á–∞—Å—Ç—å –æ–ø–∏—Å–∞–Ω–∞ 
–ú–∏–ª–æ—à–µ–º –≤ —Å—Ç–∞—Ç—å–µ [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤](https://threedots.tech/post/microservices-test-architecture/).

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ª–∏ –≤—ã CQRS —Å –∫–∞–∫–∏–º–∏-–ª–∏–±–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏? –£ –≤–∞—Å –µ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç, –≤ 
–∫–æ—Ç–æ—Ä–æ–º –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ç–∏ —à–∞–±–ª–æ–Ω—ã? –ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –¥–µ–ª–∏—Ç—å—Å—è –∏ 
—Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö!