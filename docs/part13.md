# –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ —Å–≤–æ–µ–º—É —Å—Ç—Ä–æ–µ–Ω–∏—é: –∫—Ä–µ–ø—á–µ —Å–ø–∏–º, –Ω–µ –æ–ø–∞—Å–∞—è—Å—å —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é

[–î–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–≤–æ–¥–æ–º. –û—Ä–∏–≥–∏–Ω–∞–ª –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ](https://threedots.tech/post/repository-secure-by-design/)

–†–æ–±–µ—Ä—Ç –õ–∞—â–∞–∫. –ì–ª–∞–≤–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä [Karhoo](https://www.karhoo.com/). –°–æ—É—á—Ä–µ–¥–∏—Ç–µ–ª—å
[Three Dots Labs](https://threedotslabs.com/).
–°–æ–∑–¥–∞—Ç–µ–ª—å [Watermill](https://github.com/ThreeDotsLabs/watermill).

–ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–µ—Å—Ç–∞–º –∏ –∫–æ–¥ —Ä–µ–≤—å—é –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∞–ª
–æ—à–∏–±–æ–∫. –ü—Ä–∞–≤–∏–ª—å–Ω–æ? –ù—É‚Ä¶ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –Ω–∞–≤–µ—Ä–Ω–æ–µ, –Ω–µ—Ç. –≠—Ç–æ –±—ã–ª–æ –±—ã —Å–ª–∏—à–∫–æ–º –ø—Ä–æ—Å—Ç–æ. üòâ 
–≠—Ç–∏ –º–µ—Ç–æ–¥–∏–∫–∏ —Å–Ω–∏–∂–∞—é—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫, –Ω–æ –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Ö —É—Å—Ç—Ä–∞–Ω–∏—Ç—å.
–ù–æ –∑–Ω–∞—á–∏—Ç –ª–∏ —ç—Ç–æ, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –∂–∏—Ç—å —Å –º—ã—Å–ª—å—é –æ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ –¥–æ –∫–æ–Ω—Ü–∞ 
–∂–∏–∑–Ω–∏?

–ë–æ–ª–µ–µ –≥–æ–¥–∞ –Ω–∞–∑–∞–¥ —è –Ω–∞—à–µ–ª –¥–æ–≤–æ–ª—å–Ω–æ [–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π PR](https://github.com/goharbor/harbor/pull/8917/files) –≤ 
–ø—Ä–æ–µ–∫—Ç–µ `harbor`. –≠—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä–∞—è **–ø–æ–∑–≤–æ–ª—è–ª–∞ —Å–æ–∑–¥–∞—Ç—å 
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –æ–±—ã—á–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º. –û—á–µ–≤–∏–¥–Ω–æ, —ç—Ç–æ –±—ã–ª–∞ —Å–µ—Ä—å–µ–∑–Ω–∞—è
–ø—Ä–æ–±–ª–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.** –ö–æ–Ω–µ—á–Ω–æ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –Ω–µ –Ω–∞—à–ª–∏ —ç—Ç—É –æ—à–∏–±–∫—É —Ä–∞–Ω–µ–µ.

–í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏:

```shell
		ua.RenderError(http.StatusBadRequest, "register error:"+err.Error())
		return
	}
+
+	if !ua.IsAdmin && user.HasAdminRole {
+		msg := "Non-admin cannot create an admin user."
+		log.Errorf(msg)
+		ua.SendForbiddenError(errors.New(msg))
+		return
+	}
+
	userExist, err := dao.UserExists(user, "username")
	if err != nil {
```

–û–¥–∏–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä `if` –∏—Å–ø—Ä–∞–≤–∏–ª –æ—à–∏–±–∫—É. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω–æ 
–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —ç—Ç–æ–π –æ—à–∏–±–∫–∏ –≤ –±—É–¥—É—â–µ–º. –≠—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ? **–ó–∞—â–∏—Ç–∏–ª–æ –ª–∏ —ç—Ç–æ
–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç –ø–æ–¥–æ–±–Ω–æ–π –æ—à–∏–±–∫–∏ –≤ –±—É–¥—É—â–µ–º? –Ø —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –Ω–µ—Ç.**

–ü—Ä–æ–±–ª–µ–º–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –µ—â—ë –±–æ–ª—å—à–µ –≤ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –Ω–∞–¥ –∫–æ—Ç–æ—Ä—ã–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç 
–±–æ–ª—å—à–∞—è –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –ß—Ç–æ, –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –Ω–æ–≤–∏—á–æ–∫ –≤ –ø—Ä–æ–µ–∫—Ç–µ –∏ –∑–∞–±—É–¥–µ—Ç 
–¥–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `if`? –î–∞–∂–µ –µ—Å–ª–∏ –≤—ã –Ω–µ –Ω–∞–Ω–∏–º–∞–µ—Ç–µ –Ω–æ–≤—ã—Ö –ª—é–¥–µ–π –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ 
–≤—Ä–µ–º—è, –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞–Ω—è—Ç—ã –≤ –±—É–¥—É—â–µ–º. **–í—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, —É–¥–∏–≤–∏—Ç–µ—Å—å, –∫–∞–∫ –¥–æ–ª–≥–æ 
–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –≤–∞–º–∏ –∫–æ–¥.** –ú—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –¥–æ–≤–µ—Ä—è—Ç—å –ª—é–¥—è–º 
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π –Ω–∞–º–∏ –∫–æ–¥ –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é ‚Äî –æ–Ω–∏ —ç—Ç–æ–≥–æ –Ω–µ —Å–¥–µ–ª–∞—é—Ç.

**–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—â–∏—Ç–∏—Ç –Ω–∞—Å –æ—Ç –ø–æ–¥–æ–±–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, ‚Äî —ç—Ç–æ 
—Ö–æ—Ä–æ—à–µ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –•–æ—Ä–æ—à–µ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 
–Ω–∞—à –∫–æ–¥ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–º –æ–±—Ä–∞–∑–æ–º.** –•–æ—Ä–æ—à–µ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ª–∂–µ–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ
–≤—ã –º–æ–∂–µ—Ç–µ –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞ –ø—Ä–∏–∫–∞—Å–∞—Ç—å—Å—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∫–æ–¥—É. –ù–æ–≤–∏—á–∫–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ –±—É–¥—É—Ç 
—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –≤ –±–æ–ª—å—à–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –≤–Ω–æ—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è.

> –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—á–µ—Ä–µ–¥–Ω–∞—è —Å—Ç–∞—Ç—å—è —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏ –∫–æ–¥–∞.
>
> –≠—Ç–æ—Ç –ø–æ—Å—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –±–æ–ª—å—à–æ–≥–æ —Ü–∏–∫–ª–∞, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞
> **Go, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Å –Ω–∏–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤
> –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ**. –ú—ã –¥–µ–ª–∞–µ–º —ç—Ç–æ, –¥–µ–ª—è—Å—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏
> –Ω–∞ –º–Ω–æ–≥–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–º–∏ —Å –≤–æ–∑–≥–ª–∞–≤–ª—è–µ–º—ã–º–∏ –Ω–∞–º–∏ —Å –∫–æ–º–∞–Ω–¥–∞–º–∏,
> –∏ [–Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö](https://threedots.tech/post/ddd-lite-in-go-introduction/#thats-great-but-do-you-have-any-evidence-it-works).
> –í—ã –º–æ–∂–µ—Ç–µ –∏–∑—É—á–∏—Ç—å —ç—Ç–∏ –º–µ—Ç–æ–¥—ã, —Å–æ–∑–¥–∞–≤ —Å –Ω–∞–º–∏ [–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π](https://threedots.tech/post/serverless-cloud-run-firebase-modern-go-application/#what-wild-workouts-can-do) –ø—Ä–∏–º–µ—Ä
> –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Go - **Wild Workouts**.
>
> –ú—ã –ø–æ—Å—Ç—É–ø–∏–ª–∏ –Ω–µ —Å–æ–≤—Å–µ–º –æ–±—ã—á–Ω–æ ‚Äî **–¥–æ–±–∞–≤–∏–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å—Ä–∞–∑—É –∑–∞–º–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
> –≤ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é Wild Workouts**. –ù–µ—É–∂–µ–ª–∏ –º—ã —Å–æ—à–ª–∏ —Å —É–º–∞? –ü–æ–∫–∞ –Ω–µ—Ç. üòâ
> –≠—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã –¥–ª—è –º–Ω–æ–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ Go. **–í –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ —ç—Ç–∏
> –Ω–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∫—Ä–∏—Ç–∏—á–Ω—ã–º–∏ –∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.**
>
> **–≠—Ç–æ –æ–¥–∏–Ω –∏–∑ –≤–∞–∂–Ω–µ–π—à–∏—Ö –Ω–∞–≤—ã–∫–æ–≤ —Å—Ç–∞—Ä—à–µ–≥–æ –∏–ª–∏ –≤–µ–¥—É—â–µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞; –≤—Å–µ–≥–¥–∞ –Ω—É–∂–Ω–æ
> –ø–æ–º–Ω–∏—Ç—å –æ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö.**
>
> –ú—ã –∏—Å–ø—Ä–∞–≤–∏–º –∏—Ö –ø—É—Ç–µ–º **—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞** Wild Workouts. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã –±—ã—Å—Ç—Ä–æ –ø–æ–π–º—ë—Ç–µ
> –º–µ—Ç–æ–¥–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–º–∏ –º—ã –¥–µ–ª–∏–º—Å—è.
> –ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã —ç—Ç–æ —á—É–≤—Å—Ç–≤–æ, –∫–æ–≥–¥–∞ –ø—Ä–æ—á–∏—Ç–∞–ª–∏ —Å—Ç–∞—Ç—å—é –æ –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ç–æ–¥–∏–∫–µ –∏ –ø–æ–ø—ã—Ç–∞–ª–∏—Å—å
> —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ—ë, –Ω–æ –Ω–µ —Å–º–æ–≥–ª–∏ –∏–∑-–∑–∞ —É–ø—É—â–µ–Ω–∏–π –∏ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–µ—Ç–∞–ª–µ–π –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ.
> –ü—Ä–æ–ø—É—Å–∫ –¥–µ—Ç–∞–ª–µ–π –¥–µ–ª–∞–µ—Ç —Å—Ç–∞—Ç—å–∏ –∫–æ—Ä–æ—á–µ –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–æ —ç—Ç–æ
> –Ω–µ –Ω–∞—à–∞ —Ü–µ–ª—å. –ù–∞—à–∞ —Ü–µ–ª—å ‚Äî —Å–æ–∑–¥–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—Å—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–Ω–∞–Ω–∏–π –¥–ª—è
> –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–∏–∫. –ï—Å–ª–∏ –≤—ã –µ—â–µ –Ω–µ —á–∏—Ç–∞–ª–∏ [–ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—Ç–∞—Ç—å–∏ –∏–∑
> —ç—Ç–æ–≥–æ —Ü–∏–∫–ª–∞](https://threedots.tech/series/modern-business-software-in-go/),
> –º—ã –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.
>
> –ú—ã —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö –∑–Ω–∞–Ω–∏–π –Ω–µ–ª—å–∑—è –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –¥–µ—Ç–∞–ª–∏. –ï—Å–ª–∏ –≤—ã
> —Ö–æ—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å
> –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å. –ï—Å–ª–∏ –±—ã –≤—Å—ë –±—ã–ª–æ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ,
> —É –Ω–∞—Å –±—ã –Ω–µ –±—ã–ª–æ —Ç–∞–∫–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–∞—à–∞—é—â–µ–≥–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∫–æ–¥–∞.
>
> –í–æ—Ç [–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑ 14 –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ç–µ–π](https://threedots.tech/series/modern-business-software-in-go/).
>
> –í–µ—Å—å –∫–æ–¥ Wild Workouts –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ [GitHub](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example). –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∑–≤–µ–∑–¥—É
> –Ω–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É! ‚≠ê

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ —è –¥–æ–±–∏–ª—Å—è —Ç–æ–≥–æ, —á—Ç–æ —Ç–æ–ª—å–∫–æ –ª—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–º —ç—Ç–æ 
—Ä–∞–∑—Ä–µ—à–µ–Ω–æ, —Å–º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ 
—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (—É—á–∞—Å—Ç–Ω–∏–∫) –∏ —Ç—Ä–µ–Ω–µ—Ä. –Ø —Ä–µ–∞–ª–∏–∑—É—é
—ç—Ç–æ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à –∫–æ–¥ –Ω–µ –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é.
–ü–æ —Å–≤–æ–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

–ù–∞—à–µ —Ç–µ–∫—É—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± 
–¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º. –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ —è –¥–æ–±–∞–≤–ª—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –≤ —Å–ª–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. **–ü—Ä–∏ —ç—Ç–æ–º 
–º—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–∏–º –¥–∞–Ω–Ω—ã–º –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.**

> –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π? –ö–æ—Ä–æ—á–µ –≥–æ–≤–æ—Ä—è, –µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ –±—ã–ª–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å 
> –Ω–∞—à–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—Ç–∞—Ç—å–∏, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Äî —ç—Ç–æ —à–∞–±–ª–æ–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π 
> –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–º –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ—Ç –ª–æ–≥–∏–∫–∏ –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
> –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –µ–≥–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞—Ö –∏ —É–∑–Ω–∞—Ç—å, –∫–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –µ–≥–æ –≤
> —Å–≤–æ–µ–º –ø—Ä–æ–µ–∫—Ç–µ, –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –º–æ—é –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç–∞—Ç—å—é: [–®–∞–±–ª–æ–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è 
> —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: –±–µ–∑–±–æ–ª–µ–∑–Ω–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –í–∞—à–µ–≥–æ Go —Å–µ—Ä–≤–∏—Å–∞](https://threedots.tech/post/repository-pattern-in-go/).

–ù–æ –ø–æ–¥–æ–∂–¥–∏—Ç–µ, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–¥—Ö–æ–¥—è—â–∏–º –º–µ—Å—Ç–æ–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 
–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π? –ù—É, —è –º–æ–≥—É —Å–µ–±–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ª—é–¥–∏ –º–æ–≥—É—Ç —Å–∫–µ–ø—Ç–∏—á–µ—Å–∫–∏ 
–æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ —Ç–∞–∫–æ–º—É –ø–æ–¥—Ö–æ–¥—É. –ö–æ–Ω–µ—á–Ω–æ, –º—ã –º–æ–∂–µ–º –Ω–∞—á–∞—Ç—å —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫—É—é –¥–∏—Å–∫—É—Å—Å–∏—é –æ 
—Ç–æ–º, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∞ —á—Ç–æ –Ω–µ—Ç. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ 
—Ç–æ–≥–æ, –∫—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É, –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ _–ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏_. 
–°—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–∏–Ω—É—Å–æ–≤ –Ω–µ –≤–∏–∂—É, –∞ –ø–ª—é—Å—ã –æ—á–µ–≤–∏–¥–Ω—ã. –ù–∞ –º–æ–π –≤–∑–≥–ª—è–¥, –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω 
–ø–æ–±–µ–¥–∏—Ç—å –ø—Ä–∞–≥–º–∞—Ç–∏–∑–º.

> –ß—Ç–æ –µ—â–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –≤ —ç—Ç–æ–º —Ü–∏–∫–ª–µ –º—ã –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–µ–º—Å—è –Ω–∞ _–±–∏–∑–Ω–µ—Å-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ_ 
> _–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è_. –ù–æ –¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç _Harbour_ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å—Ç–æ —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –∫
> –Ω–µ–º—É —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤.
>
> –ü–æ–∑–Ω–∞–∫–æ–º–∏–≤ –Ω–∞—à—É –∫–æ–º–∞–Ω–¥—É —Å [—á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π](https://threedots.tech/post/introducing-clean-architecture/), –Ω–∞—à —Ç–æ–≤–∞—Ä–∏—â –ø–æ –∫–æ–º–∞–Ω–¥–µ 
> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –≤ —Å–≤–æ–µ–π –∏–≥—Ä–µ –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –¥–≤–∏–∂–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. üòâ
> 
> (–ü—Ä–∏–≤–µ—Ç, –ú–∞—Ä–∏—É—à, –µ—Å–ª–∏ —Ç—ã —ç—Ç–æ —á–∏—Ç–∞–µ—à—å!)

## –ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ –∫–æ–¥, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞!

–ß—Ç–æ–±—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ã–ª–æ –Ω–∞–¥—ë–∂–Ω—ã–º, –Ω–∞–º –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–∏ –≤–µ—â–∏:

1. –õ–æ–≥–∏–∫–∞, –∫—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É (–≤ —Å–ª–æ–µ [–ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/tree/v2.6/internal/trainer/domain/hour)),
2. –§—É–Ω–∫—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (`GetTraining` –≤ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/186a2c4a912e485ac7bb4d18c2892df7617e9ec9/internal/trainings/adapters/trainings_firestore_repository.go#L57)),
3. –§—É–Ω–∫—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (`UpdateTraining` –≤ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/186a2c4a912e485ac7bb4d18c2892df7617e9ec9/internal/trainings/adapters/trainings_firestore_repository.go#L83)).

### –°–ª–æ–π –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏

–ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å ‚Äî —ç—Ç–æ –ª–æ–≥–∏–∫–∞, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è –æ —Ç–æ–º, –º–æ–∂–µ—Ç –ª–∏ 
–∫—Ç–æ-—Ç–æ —É–≤–∏–¥–µ—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É. –ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ —á–∞—Å—Ç—å –ª–æ–≥–∏–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ (–≤—ã 
–º–æ–∂–µ—Ç–µ –æ–±—Å—É–¥–∏—Ç—å, –∫—Ç–æ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É —Å –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥–æ–π –∏–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–π 
–∫–æ–º–∞–Ω–¥–æ–π), –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø–µ—Ä–µ–π—Ç–∏ –≤ —Å–ª–æ–π –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏. –≠—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å 
–ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `CanUserSeeTraining`.

–¢–∞–∫–∂–µ –¥–æ–ø—É—Å—Ç–∏–º–æ —Ö—Ä–∞–Ω–∏—Ç—å –µ—ë –≤ —Å–ª–æ–µ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏, –Ω–æ –µ—ë —Å–ª–æ–∂–Ω–µ–µ 
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ. –Ø –Ω–µ –≤–∏–∂—É –Ω–∏–∫–∞–∫–æ–≥–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤ —Ç–∞–∫–æ–º –ø–æ–¥—Ö–æ–¥–µ ‚Äî —Ç–µ–º 
–±–æ–ª–µ–µ, –µ—Å–ª–∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –µ—ë –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å –Ω–∏—á–µ–≥–æ –Ω–µ —Å—Ç–æ–∏—Ç. üòâ

```go
package training

// ...

type User struct {
    userUUID string
    userType UserType
}

// ...

type ForbiddenToSeeTrainingError struct {
    RequestingUserUUID string
    TrainingOwnerUUID  string
}

func (f ForbiddenToSeeTrainingError) Error() string {
    return fmt.Sprintf(
        "user '%s' can't see user '%s' training",
        f.RequestingUserUUID, f.TrainingOwnerUUID,
    )
}

func CanUserSeeTraining(user User, training Training) error {
    if user.Type() == Trainer {
        return nil
    }
    if user.UUID() == training.userUUID {
        return nil
    }
    
    return ForbiddenToSeeTrainingError{user.UUID(), training.UserUUID()}
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/adapters/trainings_firestore_repository.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/186a2c4a912e485ac7bb4d18c2892df7617e9ec9/internal/trainings/adapters/trainings_firestore_repository.go#L57)

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `CanUserSeeTraining`, –Ω–∞–º –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É
—Ñ—É–Ω–∫—Ü–∏—é. –í—Å—ë –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ.

```shell
func (r TrainingsFirestoreRepository) GetTraining(
	ctx context.Context,
	trainingUUID string,
+	user training.User,
) (*training.Training, error) {
	firestoreTraining, err := r.trainingsCollection().Doc(trainingUUID).Get(ctx)

	if status.Code(err) == codes.NotFound {
		return nil, training.NotFoundError{trainingUUID}
	}
	if err != nil {
		return nil, errors.Wrap(err, "unable to get actual docs")
	}

	tr, err := r.unmarshalTraining(firestoreTraining)
	if err != nil {
		return nil, err
	}
+
+	if err := training.CanUserSeeTraining(user, *tr); err != nil {
+		return nil, err
+	}
+
	return tr, nil
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/adapters/trainings_firestore_repository.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/186a2c4a912e485ac7bb4d18c2892df7617e9ec9/internal/trainings/adapters/trainings_firestore_repository.go#L57)

–ù–µ —Å–ª–∏—à–∫–æ–º –ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ? –ù–∞—à–∞ —Ü–µ–ª—å ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π, –∞ –Ω–µ —Å–ª–æ–∂–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏
–∫–æ–¥. **–≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫ —Ç–æ–≥–æ, —á—Ç–æ —ç—Ç–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ.**

–û–±–Ω–æ–≤–ª—è–µ–º UpdateTraining –ø–æ–¥–æ–±–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.

```shell
func (r TrainingsFirestoreRepository) UpdateTraining(
	ctx context.Context,
	trainingUUID string,
+	user training.User,
	updateFn func(ctx context.Context, tr *training.Training) (*training.Training, error),
) error {
	trainingsCollection := r.trainingsCollection()

	return r.firestoreClient.RunTransaction(ctx, func(ctx context.Context, tx *firestore.Transaction) error {
		documentRef := trainingsCollection.Doc(trainingUUID)

		firestoreTraining, err := tx.Get(documentRef)
		if err != nil {
			return errors.Wrap(err, "unable to get actual docs")
		}

		tr, err := r.unmarshalTraining(firestoreTraining)
		if err != nil {
			return err
		}
+
+		if err := training.CanUserSeeTraining(user, *tr); err != nil {
+			return err
+		}
+
		updatedTraining, err := updateFn(ctx, tr)
		if err != nil {
			return err
		}

		return tx.Set(documentRef, r.marshalTraining(updatedTraining))
	})
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/adapters/trainings_firestore_repository.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/186a2c4a912e485ac7bb4d18c2892df7617e9ec9/internal/trainings/adapters/trainings_firestore_repository.go#L83)

–ò... –Ω–∞ —ç—Ç–æ–º –≤—Å–µ! –ï—Å—Ç—å –ª–∏ —Å–ø–æ—Å–æ–±, —á—Ç–æ–±—ã –∫—Ç–æ-—Ç–æ —Å–º–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ? 
–ü–æ–∫–∞ `User` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≤–∞–ª–∏–¥–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ ‚Äì –Ω–µ—Ç.

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω –º–µ—Ç–æ–¥—É, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É –≤–æ [–≤–≤–æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–µ –ø–æ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–º—É
DDD](https://threedots.tech/post/ddd-lite-in-go-introduction/). –í—Å–µ –¥–µ–ª–æ –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–µ –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.

–í–æ—Ç –∫–∞–∫ —Ç–µ–ø–µ—Ä—å –≤—ã–≥–ª—è–¥–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `UpdateTraining`:

```go
func (h ApproveTrainingRescheduleHandler) Handle(ctx context.Context, cmd ApproveTrainingReschedule) (err error) {
    defer func() {
        logs.LogCommandExecution("ApproveTrainingReschedule", cmd, err)
    }()
    
    return h.repo.UpdateTraining(
        ctx,
        cmd.TrainingUUID,
        cmd.User,
        func(ctx context.Context, tr *training.Training) (*training.Training, error) {
            originalTrainingTime := tr.Time()
    
            if err := tr.ApproveReschedule(cmd.User.Type()); err != nil {
                return nil, err
            }
    
            err := h.trainerService.MoveTraining(ctx, tr.Time(), originalTrainingTime)
            if err != nil {
                return nil, err
            }
    
            return tr, nil
        },
    )
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/app/command/approve_training_reschedule.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/22c0a25b67c4669d612a2fa4a434ffae8e35e65a/internal/trainings/app/command/approve_training_reschedule.go#L39)

–ö–æ–Ω–µ—á–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –µ—â—ë –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∞–≤–∏–ª–∞, –µ—Å–ª–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (`Training`) –º–æ–∂–µ—Ç 
–±—ã—Ç—å –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞, –Ω–æ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ `Training`. –ü–æ–¥—Ä–æ–±–Ω–æ 
—ç—Ç–æ –æ–ø–∏—Å–∞–Ω–æ –≤–æ [–≤–≤–æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–µ –ø–æ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–º—É DDD](https://threedots.tech/post/ddd-lite-in-go-introduction/). üòâ

## –†–∞–±–æ—Ç–∞ —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏

–î–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–¥–Ω–∏–º —Ç—Ä–µ–Ω–∏–Ω–≥–æ–º, –≤—ã –¥–æ–ª–∂–Ω—ã 
–±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –¥–æ—Å—Ç—É–ø –∫ –Ω–∞–±–æ—Ä—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –Ω–∞–¥–µ–∂–Ω–æ –∑–∞—â–∏—â–µ–Ω. –ó–¥–µ—Å—å –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–π 
–º–∞–≥–∏–∏:

```go
func (r TrainingsFirestoreRepository) FindTrainingsForUser(ctx context.Context, userUUID string) ([]query.Training, error) {
	query := r.trainingsCollection().Query.
		Where("Time", ">=", time.Now().Add(-time.Hour*24)).
		Where("UserUuid", "==", userUUID).
		Where("Canceled", "==", false)

	iter := query.Documents(ctx)

	return r.trainingModelsToQuery(iter)
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/adapters/trainings_firestore_repository.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/186a2c4a912e485ac7bb4d18c2892df7617e9ec9/internal/trainings/adapters/trainings_firestore_repository.go#L182)

–î–µ–ª–∞—Ç—å —ç—Ç–æ –≤ —Å–ª–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `CanUserSeeTraining` –±—É–¥–µ—Ç 
–æ—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ –∏ –º–µ–¥–ª–µ–Ω–Ω–æ. –õ—É—á—à–µ —Å–æ–∑–¥–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ.

–ï—Å–ª–∏ —ç—Ç–∞ –ª–æ–≥–∏–∫–∞ –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π, –≤—ã –º–æ–∂–µ—Ç–µ 
–ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤ —Å–ª–æ–µ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤ —Ñ–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã 
–º–æ–∂–µ—Ç–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –≤–∞—à–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
–û–¥–Ω–∞–∂–¥—ã —è –¥–µ–ª–∞–ª —Ç–∞–∫, –∏ —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ –¥–æ–≤–æ–ª—å–Ω–æ —Ö–æ—Ä–æ—à–æ.

–ù–æ –≤ Wild Workouts —ç—Ç–æ –¥–æ–±–∞–≤–∏—Ç –Ω–µ–Ω—É–∂–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ ‚Äî –¥–∞–≤–∞–π—Ç–µ 
[–î–µ–ª–∞—Ç—å –ø—Ä–æ—â–µ, —Ç—É–ø–∏—Ü–∞](https://en.wikipedia.org/wiki/KISS_principle).

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

–ú—ã —á–∞—Å—Ç–æ —Ö–æ—Ç–∏–º –∏–º–µ—Ç—å –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∏–ª–∏ 
–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º—É –æ—Ç–¥–µ–ª—É –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –≤–Ω–æ—Å–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è "—Ç–∞–π–Ω–æ".
–•—É–¥—à–µ–µ, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ, ‚Äî —ç—Ç–æ —Å–æ–∑–¥–∞—Ç—å –≤—Å—è–∫–æ–≥–æ —Ä–æ–¥–∞ 
¬´—Ñ–µ–π–∫–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π¬ª –∏ —Ö–∞–∫–∏.

–ò–∑ –º–æ–µ–≥–æ –æ–ø—ã—Ç–∞ —ç—Ç–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ if, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö
–≤ –∫–æ–¥. –≠—Ç–æ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Ç—ã–≤–∞–µ—Ç –∂—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞ (–µ—Å–ª–∏ –æ–Ω —É –≤–∞—Å –µ—Å—Ç—å). –í–º–µ—Å—Ç–æ 
¬´—Ñ–∞–ª—å—à–∏–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è¬ª –ª—É—á—à–µ —Å–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Ä–æ–ª—å –∏ —è–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å 
–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Ä–æ–ª–∏.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –º–µ—Ç–æ–¥–∞–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–º–∏ –∑–Ω–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ 
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–æ–¥–µ–ª–∏ –ò–∑–¥–∞—Ç–µ–ª—å/–ü–æ–¥–ø–∏—Å—á–∏–∫ –∏–ª–∏ 
–º–∏–≥—Ä–∞—Ü–∏–π), –ª—É—á—à–µ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–µ 
–∏–º–µ–µ—Ç –≤–∞–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –º—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —á–µ–ª–æ–≤–µ–∫, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —ç—Ç–æ—Ç 
–º–µ—Ç–æ–¥, –∑–Ω–∞–µ—Ç –æ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

–ü–æ –º–æ–µ–º—É –æ–ø—ã—Ç—É, –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∞–∫—Ç–æ—Ä–æ–≤ —Å–∏–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è, —Å—Ç–æ–∏—Ç 
–¥–∞–∂–µ –≤–≤–µ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ [CQRS –∫–æ–º–∞–Ω–¥—ã](https://threedots.tech/post/basic-cqrs-in-go/) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–æ—Ä–∞. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ 
–º–æ–∂–µ—Ç –±—ã—Ç—å `UpdateTrainingByOperations`.

## –ü–µ—Ä–µ–¥–∞—á–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `context.Context`

–ù–∞—Å–∫–æ–ª—å–∫–æ —è –∑–Ω–∞—é, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ª—é–¥–∏ –ø–µ—Ä–µ–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ 
`context.Context`.

–Ø –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–∏—á–µ–≥–æ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é 
–¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ `context.Context`. –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ—Å—Ç–∞ ‚Äî –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ 
–∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ `context.Context` –º—ã —Ç–µ—Ä—è–µ–º –æ–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö 
–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ Go ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é. –≠—Ç–æ —Ç–∞–∫–∂–µ —Å–∫—Ä—ã–≤–∞–µ—Ç, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —è–≤–ª—è–µ—Ç—Å—è 
–≤–≤–æ–¥–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –≤–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π.

–ï—Å–ª–∏ –≤–∞–º –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç, —ç—Ç–æ 
–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–º –ø–ª–æ—Ö–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–¥–µ-—Ç–æ –≤ –≤–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ. –ú–æ–∂–µ—Ç, 
—Ñ—É–Ω–∫—Ü–∏—è —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –¥–µ–ª–∞–µ—Ç, –∏ –ø–µ—Ä–µ–¥–∞—Ç—å —Ç—É–¥–∞ –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Å–ª–æ–∂–Ω–æ? –ú–æ–∂–µ—Ç –ø–æ—Ä–∞ 
–µ—ë —Ä–∞–∑–±–∏—Ç—å?

## –ò —ç—Ç–æ –≤—Å–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è!

–ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –ª–µ–≥–∫–æ –±—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å.

–Ø –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –∏ –ø—Ä–∏–¥–∞—Å—Ç –≤–∞–º –±–æ–ª—å—à–µ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
–≤ –±—É–¥—É—â–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞—Ö.

–í–∏–¥–∏—Ç–µ –ª–∏ –≤—ã, —á—Ç–æ —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ? –°—á–∏—Ç–∞–µ—Ç–µ –ª–∏ –≤—ã, —á—Ç–æ —ç—Ç–æ 
–º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –≤–∞—à–∏–º –∫–æ–ª–ª–µ–≥–∞–º? –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –Ω–∏–º–∏!