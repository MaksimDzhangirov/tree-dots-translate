# –í—ã –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ü—É—Å—Ç—å Firebase —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∑–∞ –≤–∞—Å

[–î–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–≤–æ–¥–æ–º. –û—Ä–∏–≥–∏–Ω–∞–ª –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ](https://threedots.tech/post/firebase-cloud-run-authentication/)

–†–æ–±–µ—Ä—Ç –õ–∞—â–∞–∫. –ì–ª–∞–≤–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä [Karhoo](https://www.karhoo.com/). –°–æ—É—á—Ä–µ–¥–∏—Ç–µ–ª—å
[Three Dots Labs](https://threedotslabs.com/). –°–æ–∑–¥–∞—Ç–µ–ª—å [Watermill](https://github.com/ThreeDotsLabs/watermill).

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ç—Ä–µ—Ç—å—é –∏ **–∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç–∞—Ç—å—é –æ —Ç–æ–º, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å** 
"–°–ª–∏—à–∫–æ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ". –ù–æ –Ω–µ –≤–æ–ª–Ω—É–π—Ç–µ—Å—å. –≠—Ç–æ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã 
–∑–∞–∫–æ–Ω—á–∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–∞–º, –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, 
–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ –ø—Ä–∏—è—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ. **–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ
—Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ –µ—â—ë –±–æ–ª—å—à–µ–π —Å–µ—Ä–∏–∏!**

–ú—ã –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–ª–∏ —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –µ–≥–æ –±—ã–ª–æ
—Å–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –≤ –±—É–¥—É—â–µ–º. –ù–æ —Å–¥–µ–ª–∞–ª–∏ —ç—Ç–æ —É—Ç–æ–Ω—á–µ–Ω–Ω–æ. üòâ –í 
—Å–ª–µ–¥—É—é—â–µ–π —Å—Ç–∞—Ç—å–µ –º—ã –Ω–∞—á–Ω–µ–º –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞. **–ú—ã –ø–æ–∫–∞–∂–µ–º –≤–∞–º, –∫–∞–∫ –µ–¥–≤–∞ 
–∑–∞–º–µ—Ç–Ω—ã–µ –∏ —É–ø—Ä–æ—â–µ–Ω–∏—è –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ. –î–∞–∂–µ 
–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ –∫–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å—ë 
–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —ç—Ç–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º —Å –Ω—É–ª—è (–¥–∞–∂–µ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—ã–ª–æ
—Å–æ–∑–¥–∞–Ω–æ –Ω–µ —Ç–∞–∫ –¥–∞–≤–Ω–æ).**

–ù–æ –ø—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å —É –Ω–∞—Å –µ—Å—Ç—å –æ–¥–Ω–∞ –≤–∞–∂–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è ‚Äî 
–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è. –≠—Ç–æ —Ç–∞ —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ. üòâ

## –ù–µ —Å—Ç–æ–∏—Ç –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥

(–Ø –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ) –í—ã –Ω–µ —Å–æ–∑–¥–∞—ë—Ç–µ —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ 
–ø—Ä–æ–µ–∫—Ç–∞, –Ω–∞–¥ –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–±–æ—Ç–∞–µ—Ç–µ. –î–∞–∂–µ –µ—Å–ª–∏ –í—ã –¥–µ–ª–∞–µ—Ç–µ —Ç–∞–∫, **–∫—Ä–æ–º–µ –ø–æ—Ç–µ—Ä–∏ –≤—Ä–µ–º–µ–Ω–∏, 
—ç—Ç–æ –Ω–∏—á–µ–º –Ω–µ –Ω–∞–≤—Ä–µ–¥–∏—Ç. –ù–æ —ç—Ç–æ –Ω–µ –∫–∞—Å–∞–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ü–æ—á–µ–º—É?**

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ –∫–æ–º–ø–∞–Ω–∏–∏, –≤–Ω–µ–¥—Ä—è—é—â–µ–π —Ä—ã–Ω–æ–∫ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç. –í –Ω–∞—á–∞–ª–µ 
–ø—Ä–æ–µ–∫—Ç–∞ –≤—ã —Ä–µ—à–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ü–µ—Ä–≤–∞—è 
–ø—Ä–∏—á–∏–Ω–∞ ‚Äî –≤–∞—à –Ω–∞—á–∞–ª—å–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–æ–≤–µ—Ä—è–µ—Ç –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
–í—Ç–æ—Ä–∞—è –ø—Ä–∏—á–∏–Ω–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ.

_¬´–¢—ã –¥–µ–ª–∞–ª —ç—Ç–æ –º–Ω–æ–≥–æ —Ä–∞–∑¬ª_ - –≤–æ—Ç —á—Ç–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø–æ–≤—Ç–æ—Ä—è—é—Ç —Å—Ç—Ä–∞–Ω–Ω—ã–µ –≥–æ–ª–æ—Å–∞ –≤ 
—Ç–≤–æ–µ–π –≥–æ–ª–æ–≤–µ.

–í—ã —Å–º–æ—Ç—Ä–µ–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–µ—Ä–∏–∞–ª "–†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∞–≤–∏–∞–∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ"? –í –ø–æ–ª—å—Å–∫–æ–π
–≤–µ—Ä—Å–∏–∏ –∫–∞–∂–¥–∞—è —Å–µ—Ä–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–æ —Å–ª–æ–≤: _¬´–ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ—ã - —ç—Ç–æ –Ω–µ 
—Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å, –∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ—Å–∞–¥–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π¬ª_. –í –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ 
–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —É–¥–∏–≤–ª–µ–Ω–∏–µ –≤–µ—Ä–Ω–æ.

–í –Ω–∞—à–µ–º –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–æ–º –ø—Ä–æ–µ–∫—Ç–µ –≤–Ω–∞—á–∞–ª–µ –≤–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è —Ä–µ—à–∏–ª–∞ –≤–≤–µ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–π 
–∞–∫–∫–∞—É–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–ª –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏. –î–∞–∂–µ –∏–∑ 
–∫–æ—à–µ–ª—å–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –≤ —Ç–µ–æ—Ä–∏–∏, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–∏—Å—Ç–µ–º–µ. –ö–æ–Ω–µ—á–Ω–æ, –≤—Ä–µ–º–µ–Ω–Ω–æ. üòÜ
–ó–≤—É—á–∏—Ç –Ω–µ –æ—á–µ–Ω—å, –Ω–æ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ —ç—Ç–æ —É–ø—Ä–æ—Å—Ç–∏–ª–æ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤.

–°–æ –≤—Ä–µ–º–µ–Ω–µ–º –æ–± —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Å–µ –∑–∞–±—ã–ª–∏. –î–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–¥–Ω–∞–∂–¥—ã —Ö–∞–∫–µ—Ä—ã –Ω–µ 
–æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –æ—à–∏–±–∫—É –≤ –º–µ—Ö–∞–Ω–∏–∑–º–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª–∏–ª–∞ –∏–º –≤–∑–ª–æ–º–∞—Ç—å –ª—é–±–æ–π
–∞–∫–∫–∞—É–Ω—Ç –Ω–∞ –Ω–∞—à–µ–º —Ä—ã–Ω–∫–µ. –í–∫–ª—é—á–∞—è —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç.

–ù–∞—à –±–æ—Å—Å –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±—ã–ª–∏ –Ω–µ —Ç–∞–∫ —Å—á–∞—Å—Ç–ª–∏–≤—ã, –∫–∞–∫ —Ö–∞–∫–µ—Ä—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Ç–µ—Ä—è–ª–∏ 
–≤—Å–µ –¥–µ–Ω—å–≥–∏. –ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ –±—ã–ª–∞ –±—ã —Ç–∞–∫–æ–π –±–æ–ª—å—à–æ–π, –µ—Å–ª–∏ –±—ã –º—ã –ø–æ—Ç–µ—Ä—è–ª–∏ ¬´—Ç–æ–ª—å–∫–æ¬ª –≤—Å–µ 
–¥–µ–Ω—å–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã —Ç–∞–∫–∂–µ –ø–æ—Ç–µ—Ä—è–ª–∏ –≤—Å–µ –¥–µ–Ω—å–≥–∏ –Ω–∞—à–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ üòâ.

![itsgone](images/part4/aannnd-its-gone.jpg)

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –∫—Ä–∞–π–Ω–æ—Å—Ç—å—é –∏ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω—ã–º. –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ —ç—Ç–æ –Ω–µ
—á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–π—Å—è —Å–ª—É—á–∞–π? –í [–æ—Ç—á–µ—Ç–µ OWASP Top Ten](https://owasp.org/www-project-top-ten/) –≤–∑–ª–æ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ 
–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ **–≤—Ç–æ—Ä–æ–º –º–µ—Å—Ç–µ**!

> 2. –í–∑–ª–æ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ 
> —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–µ–∞–Ω—Å–∞–º–∏ —á–∞—Å—Ç–æ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º 
> —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏ –∏–ª–∏ —Ç–æ–∫–µ–Ω—ã —Å–µ–∞–Ω—Å–∞, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ 
> –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —É—á—ë—Ç–Ω—ã–º –∑–∞–ø–∏—Å—è–º
> –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–í—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞–∑–∞—Ç—å: _"–ú–æ—è –∫–æ–º–ø–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–∞–µ—Ç —Ç–æ—Å—Ç–µ—Ä—ã! –ü–æ—á–µ–º—É –º–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 
–¥–æ —ç—Ç–æ–≥–æ –¥–µ–ª–æ?"_. –Ø –ø–æ—á—Ç–∏ —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –≤–∞–º –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–µ–±–µ–∑—Ä–∞–∑–ª–∏—á–µ–Ω –∏–º–∏–¥–∂ —Å–≤–æ–µ–π 
–∫–æ–º–ø–∞–Ω–∏–∏. **–î–∏—Å–∫—Ä–µ–¥–∏—Ç–∞—Ü–∏—è –ø–æ—Å–ª–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞, –≤—ã–∑–≤–∞–Ω–Ω–æ–≥–æ —Ö–∞–∫–µ—Ä—Å–∫–∏–º –≤–∑–ª–æ–º–æ–º 
–∞–∫–∫–∞—É–Ω—Ç–æ–≤ –≤–∞—à–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞.**

–í–∞–º –≤—Å—ë –µ—â—ë –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –í—ã –º–æ–∂–µ—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é?
–î–∞–∂–µ –≥–∏–≥–∞–Ω—Ç—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ—Ç–Ω–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ 
–Ω–∞–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, –Ω–µ –º–æ–≥—É—Ç —ç—Ç–æ–≥–æ —Å–¥–µ–ª–∞—Ç—å. –í –º–∞—Ä—Ç–µ 2020 –≥–æ–¥–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å 
[–æ–±–Ω–∞—Ä—É–∂–∏–ª —É—è–∑–≤–∏–º–æ—Å—Ç—å Facebook](https://latesthackingnews.com/2020/03/03/10-year-old-facebook-oauth-framework-flaw-discovered/), –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç—å –≤–∑–ª–æ–º–∞—Ç—å —á—å—é-–ª–∏–±–æ 
—É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å Facebook. –í—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ —Å–ø—É—Å—Ç—è –æ—à–∏–±–∫–∞ –≤ –º–µ—Ö–∞–Ω–∏–∑–º–µ 
–≤—Ö–æ–¥–∞ –≤ Apple [–ø–æ–∑–≤–æ–ª–∏–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–ª–∞–¥–µ—Ç—å —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —ç—Ç–æ–≥–æ 
—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](https://bhavukjain.com/blog/2020/05/30/zeroday-signin-with-apple/).

–ï—Å–ª–∏ –≤—ã –≤—Å—ë –µ—â—ë –Ω–µ —É–≤–µ—Ä–µ–Ω—ã, —Å—Ç–æ–∏—Ç –ø–æ–¥—É–º–∞—Ç—å –æ–± —ç–∫–æ–Ω–æ–º–∏–∏ –≤–∞—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –Ø —É–≤–µ—Ä–µ–Ω, 
—á—Ç–æ **–∫–ª–∏–µ–Ω—Ç—ã –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –±—É–¥—É—Ç –Ω–∞–º–Ω–æ–≥–æ —Å—á–∞—Å—Ç–ª–∏–≤–µ–µ, –µ—Å–ª–∏ –ø–æ–¥–∞—Ä–∏—Ç–µ –∏–º –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω—ã–π
—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª. –ê –Ω–µ –Ω–∞–≤–æ—Ä–æ—á–µ–Ω–Ω—É—é, –∫–∞—Å—Ç–æ–º–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é üòâ.**

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Firebase –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–ö–æ–Ω–µ—á–Ω–æ, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–µ—à–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è 
—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –º—ã —Ö–æ—Ç–∏–º –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –∏ 
–ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–ª—É—á–∞—è. –ú—ã —Ç–∞–∫–∂–µ –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –∫–∞–∫–∏–µ-–ª–∏–±–æ –ø—Ä–æ–±–ª–µ–º—ã, 
—Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É —É—Å–ª—É–≥ ‚Äî –º—ã –∑–∞–π–º–µ–º—Å—è —ç—Ç–∏–º –≤ –±—É–¥—É—â–µ–º üòâ.

> –ï—Å–ª–∏ –≤—ã –∏—â–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –Ω–µ –∑–∞–≤–∏—Å—è—â–µ–µ –æ—Ç –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –≤–∞–º
> —Å–ª–µ–¥—É–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ [JWT](https://jwt.io/) –∏ [–±–∏–±–ª–∏–æ—Ç–µ–∫—É dgrijalva/jwt-go](https://github.com/dgrijalva/jwt-go).

> –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—á–µ—Ä–µ–¥–Ω–∞—è —Å—Ç–∞—Ç—å—è —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏ –∫–æ–¥–∞.
> 
> –≠—Ç–æ—Ç –ø–æ—Å—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –±–æ–ª—å—à–æ–≥–æ —Ü–∏–∫–ª–∞, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞
> **Go, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Å –Ω–∏–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤
> –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ**. –ú—ã –¥–µ–ª–∞–µ–º —ç—Ç–æ, –¥–µ–ª—è—Å—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏
> –Ω–∞ –º–Ω–æ–≥–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–º–∏ —Å –≤–æ–∑–≥–ª–∞–≤–ª—è–µ–º—ã–º–∏ –Ω–∞–º–∏ —Å –∫–æ–º–∞–Ω–¥–∞–º–∏,
> –∏ [–Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö](https://threedots.tech/post/ddd-lite-in-go-introduction/#thats-great-but-do-you-have-any-evidence-it-works).
> 
> –í—ã –º–æ–∂–µ—Ç–µ –∏–∑—É—á–∏—Ç—å —ç—Ç–∏ –º–µ—Ç–æ–¥—ã, —Å–æ–∑–¥–∞–≤ —Å –Ω–∞–º–∏ [–ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π](https://threedots.tech/post/serverless-cloud-run-firebase-modern-go-application/#what-wild-workouts-can-do) –ø—Ä–∏–º–µ—Ä
> –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Go - **Wild Workouts**.
> 
> –ú—ã –ø–æ—Å—Ç—É–ø–∏–ª–∏ –Ω–µ —Å–æ–≤—Å–µ–º –æ–±—ã—á–Ω–æ ‚Äî **–¥–æ–±–∞–≤–∏–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å—Ä–∞–∑—É –∑–∞–º–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
> –≤ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é Wild Workouts**. –ù–µ—É–∂–µ–ª–∏ –º—ã —Å–æ—à–ª–∏ —Å —É–º–∞? –ü–æ–∫–∞ –Ω–µ—Ç. üòâ
> –≠—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã –¥–ª—è –º–Ω–æ–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ Go. **–í –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ —ç—Ç–∏
> –Ω–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∫—Ä–∏—Ç–∏—á–Ω—ã–º–∏ –∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.**
>
> **–≠—Ç–æ –æ–¥–∏–Ω –∏–∑ –≤–∞–∂–Ω–µ–π—à–∏—Ö –Ω–∞–≤—ã–∫–æ–≤ —Å—Ç–∞—Ä—à–µ–≥–æ –∏–ª–∏ –≤–µ–¥—É—â–µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞; –≤—Å–µ–≥–¥–∞ –Ω—É–∂–Ω–æ
> –ø–æ–º–Ω–∏—Ç—å –æ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö.**
>
> –ú—ã –∏—Å–ø—Ä–∞–≤–∏–º –∏—Ö –ø—É—Ç–µ–º **—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞** Wild Workouts. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã –±—ã—Å—Ç—Ä–æ –ø–æ–π–º—ë—Ç–µ
> –º–µ—Ç–æ–¥–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–º–∏ –º—ã –¥–µ–ª–∏–º—Å—è.
>
> –ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã —ç—Ç–æ —á—É–≤—Å—Ç–≤–æ, –∫–æ–≥–¥–∞ –ø—Ä–æ—á–∏—Ç–∞–ª–∏ —Å—Ç–∞—Ç—å—é –æ –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ç–æ–¥–∏–∫–µ –∏ –ø–æ–ø—ã—Ç–∞–ª–∏—Å—å
> —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ—ë, –Ω–æ –Ω–µ —Å–º–æ–≥–ª–∏ –∏–∑-–∑–∞ —É–ø—É—â–µ–Ω–∏–π –∏ –ø—Ä–æ–ø—É—Å–∫–∞ –¥–µ—Ç–∞–ª–µ–π –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ.
> –ü—Ä–æ–ø—É—Å–∫ –¥–µ—Ç–∞–ª–µ–π –¥–µ–ª–∞–µ—Ç —Å—Ç–∞—Ç—å–∏ –∫–æ—Ä–æ—á–µ –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–æ —ç—Ç–æ
> –Ω–µ –Ω–∞—à–∞ —Ü–µ–ª—å. –ù–∞—à–∞ —Ü–µ–ª—å - —Å–æ–∑–¥–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—Å—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–Ω–∞–Ω–∏–π –¥–ª—è
> –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–∏–∫. –ï—Å–ª–∏ –≤—ã –µ—â–µ –Ω–µ —á–∏—Ç–∞–ª–∏ [–ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—Ç–∞—Ç—å–∏ –∏–∑
> —ç—Ç–æ–≥–æ —Ü–∏–∫–ª–∞](https://threedots.tech/series/modern-business-software-in-go/),
> –º—ã –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.
>
> –ú—ã —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö –∑–Ω–∞–Ω–∏–π –Ω–µ–ª—å–∑—è –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –¥–µ—Ç–∞–ª–∏. –ï—Å–ª–∏ –≤—ã
> —Ö–æ—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å
> –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å. –ï—Å–ª–∏ –±—ã –≤—Å—ë –±—ã–ª–æ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ,
> —É –Ω–∞—Å –±—ã –Ω–µ –±—ã–ª–æ —Ç–∞–∫–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å—Ç—Ä–∞—à–∞—é—â–µ–≥–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∫–æ–¥–∞.
>
> –í–æ—Ç [–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑ 14 –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ç–µ–π](https://threedots.tech/series/modern-business-software-in-go/).
>
> –í–µ—Å—å –∫–æ–¥ Wild Workouts –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ [GitHub](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example). –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∑–≤–µ–∑–¥—É
> –Ω–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É! ‚≠ê

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–ø—Ä–∏–º–µ—Ä Wild Workouts, –∫–æ—Ç–æ—Ä–æ–µ –º—ã —Å–æ–∑–¥–∞–ª–∏ –¥–ª—è —ç—Ç–æ–π —Å–µ—Ä–∏–∏ —Å—Ç–∞—Ç–µ–π, –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ
–≤—Ä–µ–º—è —Ä–∞–∑–º–µ—â–µ–Ω–æ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ Firebase. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [Firebase –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](https://firebase.google.com/docs/auth) - 
–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä. –£ —ç—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –µ—Å—Ç—å –æ–¥–Ω–æ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ ‚Äî –æ–Ω–æ 
—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –∫–∞–∫ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –±—ç–∫—ç–Ω–¥–∞, —Ç–∞–∫ –∏ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã 
—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

> –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ –≤ —Å—Ç–∞—Ç—å–µ _–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ 
> –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Terraform –¥–ª—è –±–µ—Å—Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Google Cloud Run –∏ Firebase_.
> –í [–ø–µ—Ä–≤–æ–π —Å—Ç–∞—Ç—å–µ](https://threedots.tech/post/serverless-cloud-run-firebase-modern-go-application/) –≤ –∫–æ–Ω—Ü–µ –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª, –∫–∞—Å–∞—é—â–∏–π—Å—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.
> –í–æ –≤—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –≤–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è –≤—Ö–æ–¥–∞ –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π 
> –ø–æ—á—Ç–µ/–ø–∞—Ä–æ–ª—é –Ω–∞ –≤–∫–ª–∞–¥–∫–µ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–ú–µ—Ç–æ–¥ –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É** –≤ [–∫–æ–Ω—Å–æ–ª–∏ 
> Firebase](https://console.firebase.google.com/project/_/authentication/providers)!
> 
> ![firebase-console](images/part4/firebase-auth-providers.png)

## –§—Ä–æ–Ω—Ç–µ–Ω–¥

–ü–µ—Ä–≤–æ–µ, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, —ç—Ç–æ [–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Firebase SDK](https://firebase.google.com/docs/web/setup#add-sdks-initialize).

–î–∞–ª–µ–µ –≤ —Ñ–æ—Ä–º–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é `loginUser`. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è 
–≤—ã–∑—ã–≤–∞–µ—Ç `Auth.login`, `Auth.waitForAuthReady` –∏ `Auth.getJwtToken`. –†–µ–∑—É–ª—å—Ç–∞—Ç
–ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç–∞–º, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º OpenAPI, —Å –ø–æ–º–æ—â—å—é `setApiClientsAuth`.

```js
// ...
export function loginUser(login, password) {
    return Auth.login(login, password)
        .then(function () {
            return Auth.waitForAuthReady()
        })
        .then(function () {
            return Auth.getJwtToken(false)
        })
        .then(token => {
            setApiClientsAuth(token)
        })
// ...
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/web/src/repositories/user.js](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/4de7a36ee40e4cff5334bc33597592cc8468df54/web/src/repositories/user.js#L36)

`Auth` - —ç—Ç–æ –∫–ª–∞—Å—Å —Å –¥–≤—É–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏: Firebase –∏ mock. –ü–æ–∑–∂–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º 
—Ñ–∏–∫—Ç–∏–≤–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –∞ —Å–µ–π—á–∞—Å —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–º—Å—è –Ω–∞ Firebase.

–ß—Ç–æ–±—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `firebase.auth().SignInWithEmailAndPassword`.
–ï—Å–ª–∏ –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ, `auth().CurrentUser.getIdToken` –≤–µ—Ä–Ω—ë—Ç –Ω–∞—à JWT —Ç–æ–∫–µ–Ω.

```js
class FirebaseAuth {
    login(login, password) {
        return firebase.auth().signInWithEmailAndPassword(login, password)
    }

    waitForAuthReady() {
        return new Promise((resolve) => {
            firebase
                .auth()
                .onAuthStateChanged(function () {
                    resolve()
                });
        })
    }

    getJwtToken(required) {
        return new Promise((resolve, reject) => {
            if (!firebase.auth().currentUser) {
                if (required) {
                    reject('no user found')
                } else {
                    resolve(null)
                }
                return
            }

            firebase.auth().currentUser.getIdToken(false)
                .then(function (idToken) {
                    resolve(idToken)
                })
                .catch(function (error) {
                    reject(error)
                });
        })
    }

    // ...
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/web/src/repositories/auth.js](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/4de7a36ee40e4cff5334bc33597592cc8468df54/web/src/repositories/auth.js#L6)

> Firebase —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —Å –ø–æ–º–æ—â—å—é —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö 
> OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ Facebook, Gmail –∏–ª–∏ GitHub.

–ó–∞—Ç–µ–º –Ω–∞–º –Ω—É–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç—É `authentications['bearerAuth'].accessToken`
–∫–ª–∏–µ–Ω—Ç–∞–º, [—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º OpenAPI](https://threedots.tech/post/serverless-cloud-run-firebase-modern-go-application/#public-http-api), JWT —Ç–æ–∫–µ–Ω, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ 
`Auth.getJwtToken(false)`. –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω OpenAPI –∫–ª–∏–µ–Ω—Ç–∞–º –∏ –≤—É–∞–ª—è! –í—Å–µ 
–Ω–∞—à–∏ –∑–∞–ø—Ä–æ—Å—ã —Ç–µ–ø–µ—Ä—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã.

```js
export function setApiClientsAuth(idToken) {
    usersClient.authentications['bearerAuth'].accessToken = idToken
    trainerClient.authentications['bearerAuth'].accessToken = idToken
    trainingsClient.authentications['bearerAuth'].accessToken = idToken
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/web/src/repositories/auth.js](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/4de7a36ee40e4cff5334bc33597592cc8468df54/web/src/repositories/auth.js#L118)

> –ï—Å–ª–∏ –í—ã —Å–æ–∑–¥–∞—ë—Ç–µ —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é OpenAPI, —Ç–æ –æ–Ω–∞ –Ω–µ –±—É–¥–µ—Ç 
> —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ [–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](https://swagger.io/docs/specification/authentication/bearer-authentication/). –í 
> [—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ OpenAPI](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/a0a41253db96d46d75e7ff4c7e7f95848f47dcc3/api/openapi/trainings.yml#L14) Wild Workouts —ç—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ, —è –±—ã –ø–æ—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª –≤–∞–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å [—Å—Å—ã–ª–∫—É –ø–æ API 
Firebase –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](https://firebase.google.com/docs/reference/js/firebase.auth).

## –ë–µ–∫–µ–Ω–¥

–ë–µ–∫–µ–Ω–¥ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–∞ –Ω–∞—à–µ–º HTTP-—Å–µ—Ä–≤–µ—Ä–µ. –Ø —Å–æ–∑–¥–∞–ª 
–ø—Ä–æ—Å—Ç–æ–π HTTP middleware, –∫–æ—Ç–æ—Ä—ã–π —Å–¥–µ–ª–∞–µ—Ç —ç—Ç—É –∑–∞–¥–∞—á—É –∑–∞ –Ω–∞—Å.

–≠—Ç–æ—Ç middleware –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏:

1. –ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∞
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω —Å –ø–æ–º–æ—â—å—é –∫–ª–∏–µ–Ω—Ç–∞ Firebase –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

```go
package auth

import (
    "context"
    "net/http"
    
    "firebase.google.com/go/auth"
    "github.com/MaksimDzhangirov/three-dots/internal/common/server/httperr"
)

type FirebaseHttpMiddleware struct {
    AuthClient *auth.Client
}

func (a FirebaseHttpMiddleware) Middleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        ctx := r.Context()
    
        bearerToken := a.tokenFromHeader(r)
        if bearerToken == "" {
            httperr.Unauthorised("empty-bearer-token", nil, w, r)
            return
        }
    
        token, err := a.AuthClient.VerifyIDToken(ctx, bearerToken)
        if err != nil {
            httperr.Unauthorised("unable-to-verity-jwt", err, w, r)
            return
        }
    
        // –≤—Å–µ–≥–¥–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–∏–ø –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ ctxKey)
        // –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∏–∫—Ç–æ –∏–∑ –≤–Ω–µ –ø–∞–∫–µ—Ç–∞ –Ω–µ —Å–º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å/–ø—Ä–æ—á–∏—Ç–∞—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ
        ctx = context.WithValue(ctx, userContentKey, User{
            UUID:        token.UID,
            Email:       token.Claims["email"].(string),
            Role:        token.Claims["role"].(string),
            DisplayName: token.Claims["name"].(string),
        })
        r = r.WithContext(ctx)
    
        next.ServeHTTP(w, r)
    })
}

// ...

type ctxKey int

const (
    userContentKey ctxKey = iota
)

// ...

func UserFromCtx(ctx context.Context) (User, error) {
    u, ok := ctx.Value(userContentKey).(User)
    if ok {
        return u, nil
    }
    
    return User{}, NoUserInContextError
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/common/auth/http.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/33be9ae12a031b85b09fd8779fc445445785b106/internal/common/auth/http.go#L13)

–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç –≤ –∫–∞–∂–¥–æ–º HTTP-–∑–∞–ø—Ä–æ—Å–µ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ 
`auth.UserFromCtx`.

```go
func (h HttpServer) GetTrainings(w http.ResponseWriter, r *http.Request) {
    user, err := auth.UserFromCtx(r.Context())
    if err != nil {
        httperr.Unauthorised("no-user-found", err, w, r)
        return
    }

    // ...
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainings/http.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/33be9ae12a031b85b09fd8779fc445445785b106/internal/trainings/http.go#L26)

–ú—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ–º –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º —Ä–µ—Å—É—Ä—Å–∞–º, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–∞–≤
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```go
func (h HttpServer) MakeHourAvailable(w http.ResponseWriter, r *http.Request) {
    user, err := auth.UserFromCtx(r.Context())
    if err != nil {
        httperr.Unauthorised("no-user-found", err, w, r)
        return
    }

    if user.Role != "trainer" {
        httperr.Unauthorised("invalid-role", nil, w, r)
        return
    }

    // ...
}
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/trainer/http.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/ef6056fdeb39b89009127e07600f1b9ec87e717c/internal/trainer/http.go#L32)

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ `users`. –í—ã 
–º–æ–∂–µ—Ç–µ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö –∏–∑ FirebaseUI. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —á–µ—Ä–µ–∑ UI –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ 
—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä claims - —ç—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ API.

```go
config := &firebase.Config{ProjectID: os.Getenv("GCP_PROJECT")}
firebaseApp, err := firebase.NewApp(context.Background(), config, opts...)
if err != nil {
    return nil, err
}

authClient, err := firebaseApp.Auth(context.Background())
if err != nil {
    return nil, err
}

// ...

for _, user := range usersToCreate {
    userToCreate := (&auth.UserToCreate{}).
        Email(user.Email).
        Password("123456").
        DisplayName(user.DisplayName)

    createdUser, err := authClient.CreateUser(context.Background(), userToCreate)
    
    // ...

    err = authClient.SetCustomUserClaims(context.Background(), createdUser.UID, map[string]interface{}{
        "role": user.Role,
    })
    
    // ...
}
// ...
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/internal/users/fixtures.go](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/ef6056fdeb39b89009127e07600f1b9ec87e717c/internal/users/fixtures.go#L103)

![firebase-auth](images/part4/firebase-auth.png)

## –ò–º–∏—Ç–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –≤—ã—Å–æ–∫–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –∏ [–æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–∞](https://github.com/firebase/firebase-tools/issues/1677) –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —ç–º—É–ª—è—Ç–æ—Ä–∞
Firebase –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –µ–≥–æ –ø–æ–∫–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ó–¥–µ—Å—å —Å–∏—Ç—É–∞—Ü–∏—è 
–æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∞ –Ω–∞ Firestore - —è —Ö–æ—á—É –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 
–ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ü–æ–∫–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —ç–º—É–ª—è—Ç–æ—Ä–∞, –Ω–µ—Ç
–¥—Ä—É–≥–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –∫—Ä–æ–º–µ –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é —Ñ–∏–∫—Ç–∏–≤–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.

–í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –±–µ–∫–µ–Ω–¥–∞ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ. GetJwtToken [–Ω–∞ 
—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ](../code/wild-workouts/part4/web/src/repositories/auth.js) —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è 
–ø—É—Ç—ë–º –ø—Ä–æ—Å—Ç–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JWT —Ç–æ–∫–µ–Ω–∞ —Å `mock_secret`. [–ë–µ–∫–µ–Ω–¥](../code/wild-workouts/part4/internal/common/auth/http_mock.go) –≤–º–µ—Å—Ç–æ –≤—ã–∑–æ–≤–∞ Firebase
–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –±—ã–ª –ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω JWT —Å `mock_secret`.

–≠—Ç–æ –≤—Å–µ–ª—è–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —á—Ç–æ –Ω–∞—à –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±–æ–ª–µ–µ –∏–ª–∏ –º–µ–Ω–µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. 
–ù–æ –º–æ–∂–Ω–æ –ª–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Å –ø–æ–º–æ—â—å—é –Ω–∞ Firebase –ø—Ä–æ–¥–∞–∫—à–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ?

## Firebase –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–§–∏–∫—Ç–∏–≤–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ –¥–∞—ë—Ç –Ω–∞–º 100% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Ç–æ–º, —á—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç–∞–µ—Ç
–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –£ –Ω–∞—Å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Firebase –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ª–æ–∫–∞–ª—å–Ω–æ.
–î–ª—è —ç—Ç–æ–≥–æ –≤–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤.

**–≠—Ç–æ –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ. –ï—Å–ª–∏ –≤—ã –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ—Ç–µ –≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –≤—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, 
–º–æ–∂–µ—Ç–µ [–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç—É —á–∞—Å—Ç—å](part4.md#firebase----).**

–ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ, –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª —Å–ª—É–∂–µ–±–Ω–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

> –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –µ–≥–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π! –ù–µ –≤–æ–ª–Ω—É–π—Ç–µ—Å—å, –æ–Ω —É–∂–µ –≤ `.gitignore`.

–î–∞–ª–µ–µ –Ω—É–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å **–≤—Å–µ** —Å—Ç—Ä–æ–∫–∏, –¥–æ–±–∞–≤–ª—è—é—â–∏–µ —Å–ª—É–∂–µ–±–Ω—É—é —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å
–≤ docker-compose.yml.

```yaml
     volumes:
       - ./pkg:/pkg
-#      - ./service-account-file.json:$SERVICE_ACCOUNT_FILE
+      - ./service-account-file.json:$SERVICE_ACCOUNT_FILE
     working_dir: /pkg/trainer
     ports:
       - "127.0.0.1:3000:$PORT"

       context: ./dev/docker/app
     volumes:
       - ./pkg:/pkg
-#      - ./service-account-file.json:$SERVICE_ACCOUNT_FILE
+      - ./service-account-file.json:$SERVICE_ACCOUNT_FILE
     working_dir: /pkg/trainer

@ ... —Å–¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤!
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/docker-compose.yml](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/3d2ce607c0bcddc2a7f9cb56193167c8543d57ec/docker-compose.yml)

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å–≤–æ–∏—Ç—å –≤ `GCP_PROJECT` –∑–Ω–∞—á–µ–Ω–∏—é —Å–≤–æ–µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ 
–ø—Ä–æ–µ–∫—Ç–∞, —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `SERIVCE_ACCOUNT_FILE` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `MOCK_AUTH` –≤ 
`false` –≤ `.env`.

```
-GCP_PROJECT=threedotslabs-cloudnative
+GCP_PROJECT=YOUR-PROJECT-ID
 
 PORT=3000
 
-FIRESTORE_PROJECT_ID=threedotslabs-cloudnative
+FIRESTORE_PROJECT_ID=YOUR-PROJECT-ID
 FIRESTORE_EMULATOR_HOST=firestore:8787
 # env used by karhoo/firestore-emulator container
-GCP_PROJECT_ID=threedotslabs-cloudnative
+GCP_PROJECT_ID=YOUR-PROJECT-ID
 
 TRAINER_GRPC_ADDR=trainer-grpc:3000
 USERS_GRPC_ADDR=users-grpc:3000

@ ...
 
 CORS_ALLOWED_ORIGINS=http://localhost:8080
 
-#SERVICE_ACCOUNT_FILE=/service-account-file.json
-MOCK_AUTH=true
+SERVICE_ACCOUNT_FILE=/service-account-file.json
+MOCK_AUTH=false
 LOCAL_ENV=true
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/.env](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/3d2ce607c0bcddc2a7f9cb56193167c8543d57ec/.env)

```js
-const MOCK_AUTH = process.env.NODE_ENV === 'development'
+const MOCK_AUTH = false
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/web/src/repositories/auth.js](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/4de7a36ee40e4cff5334bc33597592cc8468df54/web/src/repositories/auth.js#L124)

–¢–µ–ø–µ—Ä—å –≤–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –≤ [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü—Ä–æ–µ–∫—Ç–∞](https://console.firebase.google.com/project/_/settings/general) (–¥–ª—è —ç—Ç–æ–≥–æ —â–µ–ª–∫–Ω–∏—Ç–µ –Ω–∞
–∑–Ω–∞—á–æ–∫ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ —Å–ø—Ä–∞–≤–∞ –æ—Ç _Project overview_) –∏ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Firebase –≤ 
`web/public/__/firebase/init.json`.

![settings](images/part4/firebase-app-config.png)

```json
-  "apiKey": "",
-  "appId": "",
-  "authDomain": "",
-  "databaseURL": "",
-  "messagingSenderId": "",
-  "projectId": "",
-  "storageBucket": ""
+  "apiKey": "AIzaSyBW6TNG5Xdq1F7MleYml8CovOej5SbxXhw",
+  "authDomain": "wild-workouts-6.firebaseapp.com",
+  "databaseURL": "https://wild-workouts-6.firebaseio.com",
+  "projectId": "wild-workouts-6",
+  "storageBucket": "wild-workouts-6.appspot.com",
+  "messagingSenderId": "519519305315",
+  "appId": "1:519519305315:web:cde76e4847f0d95cc84256"
 }
```
–í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥: [github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/web/public/__/firebase/init.json](https://github.com/ThreeDotsLabs/wild-workouts-go-ddd-example/blob/4de7a36ee40e4cff5334bc33597592cc8468df54/web/public/__/firebase/init.json)

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, —ç—Ç–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å docker-compose** 
–¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Å—Å—ã–ª–æ–∫.

## –ò –Ω–∞ —ç—Ç–æ–º –≤—Å—ë

–ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±—ã–ª–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π. –ù–∞–º —É–¥–∞–ª–æ—Å—å —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –º–Ω–æ–≥–æ 
–≤—Ä–µ–º–µ–Ω–∏. **–°–∏—Ç—É–∞—Ü–∏—è –º–æ–≥–ª–∞ –±—ã –±—ã—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π, –µ—Å–ª–∏ –±—ã –º—ã –Ω–µ —Ö–æ—Ç–µ–ª–∏ —Ä–∞–∑–º–µ—â–∞—Ç—å 
–Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Firebase.** –ù–∞—à–∞ –∏–¥–µ—è —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ —Ç–æ–º, 
—á—Ç–æ–±—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–æ—Å—Ç—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –±—É–¥—É—â–∏—Ö —Å—Ç–∞—Ç–µ–π.

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –º—ã –Ω–µ –∏—Å—á–µ—Ä–ø–∞–ª–∏ —Ç–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ù–æ, –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, –Ω–∞ 
–¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –º—ã –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ–º —É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é.

**–ú–æ–∂–µ—Ç –±—ã—Ç—å, —É –≤–∞—Å –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∏–π –∏–ª–∏ –ø–ª–æ—Ö–æ–π –æ–ø—ã—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª—é–±–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è 
–¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ Go? –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö, —á—Ç–æ–±—ã –≤—Å–µ 
—á–∏—Ç–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –∏–∑–≤–ª–µ—á—å –∏–∑ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑—É!** üëç

–í —ç—Ç–æ–π —Å–µ—Ä–∏–∏ —Å—Ç–∞—Ç–µ–π –º—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –ø–æ–∫–∞–∑–∞—Ç—å –≤–∞–º, –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ
–ª–µ–≥–∫–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ –ø—Ä–∏—è—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ.
–í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –≤–∏–¥–µ–ª–∏ –ø—Ä–∏–º–µ—Ä—ã –¥–æ–º–µ–Ω–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ —á–∏—Å—Ç–æ–π 
–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤ Go. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏–∑ –Ω–∏—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–µ —Ç–∞–∫ –ø—Ä–∞–≥–º–∞—Ç–∏—á–Ω–æ, –∫–∞–∫ —ç—Ç–æ 
–≤—ã–≥–ª—è–¥–∏—Ç –Ω–∞ —Å–ª–æ–≤–∞—Ö.

**–í –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç–∞—Ç—å—è—Ö –º—ã –ø–æ–∫–∞–∂–µ–º –º–µ—Ç–æ–¥–∏–∫–∏, —É—Å–ø–µ—à–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö, 
–∫–æ—Ç–æ—Ä—ã–º–∏ —Ä—É–∫–æ–≤–æ–¥–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ª–µ—Ç.** –ú—ã —Ç–∞–∫–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –∏—Ö 
–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, –∞ –∫–æ–≥–¥–∞ —ç—Ç–æ –∏–∑–ª–∏—à–µ—Å—Ç–≤–æ –∏–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–¥–∏ —Å—Ç—Ä–æ—á–∫–∏ –≤ 
—Ä–µ–∑—é–º–µ. –Ø —É–≤–µ—Ä–µ–Ω, —á—Ç–æ —ç—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç –≤–∞—Å –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ—é —Ç–æ—á–∫—É –∑—Ä–µ–Ω–∏—è –Ω–∞ —ç—Ç–∏ 
–º–µ—Ç–æ–¥–∏–∫–∏. üòâ

–≠—Ç–æ –≤—Å–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è. –°–ª–µ–¥—É—é—â–∞—è —Å—Ç–∞—Ç—å—è –≤—ã–π–¥–µ—Ç —á–µ—Ä–µ–∑ 1-2 –Ω–µ–¥–µ–ª–∏. 
**–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à—É —Ä–∞—Å—Å—ã–ª–∫—É, –µ—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ –µ—ë –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å!** üòâ